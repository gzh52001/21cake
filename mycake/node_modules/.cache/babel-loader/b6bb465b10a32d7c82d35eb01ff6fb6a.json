{"ast":null,"code":"var _jsxFileName = \"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\src\\\\pages\\\\Type\\\\index.js\";\nimport React, { Component } from 'react';\nimport { Tabs, Toast } from 'antd-mobile';\nimport { withRouter } from 'react-router-dom';\nimport './type.css';\nimport http from '../../utils/http'; //成功提示框\n\nfunction successToast() {\n  Toast.success('成功添加到购物车！', 1);\n}\n\nclass Type extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tabs: [{\n        title: '蛋糕',\n        sub: '1',\n        type: 'cake'\n      }, {\n        title: '面包',\n        sub: '2',\n        type: 'bread'\n      }, {\n        title: '咖啡下午茶',\n        sub: '3',\n        type: 'cake'\n      }, {\n        title: '冰淇淋',\n        sub: '4',\n        type: 'cake'\n      }, {\n        title: '常温蛋糕',\n        sub: '5',\n        type: 'cake'\n      }, {\n        title: '设计师礼品',\n        sub: '6',\n        type: 'cake'\n      }],\n      type: 'cake',\n      //默认是cake,\n      typename: '',\n      typrtitle: '',\n      initialPage: 0\n    };\n\n    this.getdata = type => {\n      console.log(\"initialPage:\" + this.state.initialPage); // console.log(this.state.initialPage);\n\n      const data = http.get(`/good/type/` + type);\n      data.then(res => {\n        this.setState({\n          typedata: res.data,\n          type\n        });\n        this.showdata(type);\n      });\n    };\n\n    this.add = gid => {\n      // console.log(gid);\n      //根据商品id先查询这个商品信息，然后加到购物车\n      http.get('/good/getgood/' + gid).then(res => {\n        // console.log(res);\n        //获取改商品信息\n        let goodmsg = res.data.p[0]; //   goodmsg.weight1++;\n        //然后存到数据库，购物车那边再调用\n        //   console.log(goodmsg);\n\n        http.post('/shopcar/addgoods', {\n          gid: goodmsg.gid,\n          img: goodmsg.img,\n          cname: goodmsg.chtitle,\n          ename: goodmsg.egtitle,\n          weight: goodmsg.weight,\n          weight1: 1,\n          weight2: goodmsg.weight2,\n          weight3: goodmsg.weight3,\n          weight4: goodmsg.weight4,\n          price: goodmsg.price\n        }).then(res => {\n          // console.log(res);\n          //成功后弹出提醒\n          if (res.flag) {\n            successToast();\n          }\n        });\n      });\n    };\n\n    this.showdata = type => {\n      let typename = '';\n      let typrtitle = '';\n\n      switch (type) {\n        case 'cake':\n          typename = '蛋糕';\n          typrtitle = '新鲜乳脂奶油蛋糕';\n          break;\n\n        case 'icecream':\n          typename = '冰淇淋';\n          typrtitle = '10天生命的意式杰拉朵冰淇淋';\n          break;\n\n        case 'tea':\n          typename = '奶羹和雪酪';\n          typrtitle = '奶羹和雪酪';\n          break;\n\n        case 'bread':\n          typename = '面包';\n          typrtitle = '面包';\n          break;\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-pro-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pro-list-title\",\n        id: \"list-title-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      }, typename, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }\n      }, typrtitle))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-box\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }\n      }, this.state.typedata.map(item => /*#__PURE__*/React.createElement(\"li\", {\n        id: \"list-goods-\",\n        key: item.gid,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-goods-pdleft\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-pro-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        title: item.chtitle,\n        onClick: this.gogoods.bind(null, item.gid),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"list-pro-img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: item.img,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 49\n        }\n      })), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 45\n        }\n      }, item.egtitle, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 45\n        }\n      }, item.chtitle)), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 45\n        }\n      }, `¥${item.price}.00/454g(1.0磅)`), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 45\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://m.21cake.com/upload/images/1e22720bd656f7bac246159010c7e1f4.png\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 49\n        }\n      }))), /*#__PURE__*/React.createElement(\"a\", {\n        className: \"cart-add\",\n        name: \"cart-add_1318\",\n        \"data-id\": \"1318\",\n        onClick: this.add.bind(null, item.gid),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://static.21cake.com//themes/wap/img/list-cart.png\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 45\n        }\n      })))))))));\n    };\n\n    this.gogoods = gid => {\n      this.props.history.push(`/goods/${gid}`);\n    };\n  }\n\n  async componentDidMount() {\n    //如果首页点击蛋糕、面包就会在这里进行接收\n    let goodtype = this.props.location.pathname.split(`${this.props.match.path}/`)[1];\n    console.log(goodtype);\n\n    if (goodtype) {\n      //先找到传进来的type在tabs中的index然后设置给initialPage\n      for (var i = 0; i < this.state.tabs.length; i++) {\n        if (this.state.tabs[i].type == goodtype) {\n          await this.setState({\n            initialPage: i\n          });\n          console.log(\"initialPage:\" + this.state.initialPage);\n          this.getdata(goodtype); // break;\n        }\n      }\n    } else {\n      //初始化渲染cake的数据\n      this.getdata(this.state.type);\n    }\n  } //切换type的时候\n\n\n  render() {\n    const {\n      typedata\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"type\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      tabs: this.state.tabs //初始化值\n      ,\n      initialPage: this.state.initialPage //高亮字体颜色\n      ,\n      tabBarActiveTextColor: '#442818' //切换type\n      ,\n      onChange: (tab, index) => {\n        this.getdata(tab.type);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, typedata ? this.showdata.bind(null, this.state.type) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"lost-bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }, \"\\u6CA1\\u4E86\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      id: \"appDownloadLink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"https://m.21cake.com/appdown.html\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }, \"\\u4E0B\\u8F7DAPP\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, \"\\u8054\\u7CFB\\u6211\\u4EEC\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }, \"\\u5168\\u7AD9\\u516C\\u544A\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, \"\\u751F\\u4EA7\\u7ECF\\u8425\\u8D44\\u8D28\"))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }, \"Copyright\\xA9 21Cake\\u86CB\\u7CD5\\u5B98\\u7F51\\u5546\\u57CE 2007-2020,\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }), \"\\u7248\\u6743\\u6240\\u6709\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }), \"\\u4EACICP\\u590714006254\\u53F7-1\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    }), \"\\u7F51\\u7AD9\\u6CE8\\u518C\\u516C\\u53F8\\u540D\\u79F0: \\u5317\\u4EAC\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }), \"\\u7F51\\u7AD9\\u8FD0\\u8425\\uFF1A\\u5EFF\\u4E00\\u5BA2\\uFF08\\u4E0A\\u6D77\\uFF09\\u7535\\u5B50\\u5546\\u52A1\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }), \"\\u4E0A\\u6D77\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\\u5206\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }), \"\\u676D\\u5DDE\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    }), \"\\u5E7F\\u5DDE\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }\n    }), \"\\u5317\\u4EAC\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    }), \"\\u6DF1\\u5733\\u5EFF\\u4E00\\u5BA2\\u8D38\\u6613\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }\n    }), \"\\u5929\\u6D25\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }), \"\\u5E7F\\u5DDE\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u8D38\\u6613\\u6709\\u9650\\u516C\\u53F8\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    }), \"\\u4E3E\\u5B9E\\uFF08\\u4E0A\\u6D77\\uFF09\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\")));\n  }\n\n}\n\nType = withRouter(Type);\nexport default Type;","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/src/pages/Type/index.js"],"names":["React","Component","Tabs","Toast","withRouter","http","successToast","success","Type","state","tabs","title","sub","type","typename","typrtitle","initialPage","getdata","console","log","data","get","then","res","setState","typedata","showdata","add","gid","goodmsg","p","post","img","cname","chtitle","ename","egtitle","weight","weight1","weight2","weight3","weight4","price","flag","map","item","gogoods","bind","props","history","push","componentDidMount","goodtype","location","pathname","split","match","path","i","length","render","tab","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Tabs,Toast} from 'antd-mobile';\r\nimport {withRouter} from 'react-router-dom';\r\nimport './type.css'\r\nimport http from '../../utils/http'\r\n\r\n//成功提示框\r\nfunction successToast() {\r\n    Toast.success('成功添加到购物车！', 1);\r\n  }\r\n\r\nclass Type extends Component {\r\n    state={\r\n        tabs:[\r\n                { title: '蛋糕', sub: '1' ,type:'cake'},\r\n                { title: '面包', sub: '2',type:'bread' },\r\n                { title: '咖啡下午茶', sub: '3',type:'cake' },\r\n                { title: '冰淇淋', sub: '4',type:'cake' },\r\n                { title: '常温蛋糕', sub: '5',type:'cake' },\r\n                { title: '设计师礼品', sub: '6',type:'cake' },\r\n            ],\r\n        type:'cake',//默认是cake,\r\n        typename:'',\r\n        typrtitle:'',\r\n        initialPage:0\r\n    }\r\n    async componentDidMount(){\r\n        //如果首页点击蛋糕、面包就会在这里进行接收\r\n        let goodtype=this.props.location.pathname.split(`${this.props.match.path}/`)[1]\r\n        console.log(goodtype);\r\n        \r\n        if(goodtype){\r\n            //先找到传进来的type在tabs中的index然后设置给initialPage\r\n            for(var i=0;i<this.state.tabs.length;i++){\r\n                if(this.state.tabs[i].type==goodtype){\r\n                    await this.setState({initialPage:i});\r\n                    console.log(\"initialPage:\"+this.state.initialPage);\r\n                    this.getdata(goodtype);\r\n                    // break;\r\n                }\r\n            }\r\n        }else{\r\n            //初始化渲染cake的数据\r\n            this.getdata(this.state.type)\r\n        }\r\n        \r\n    }\r\n    //切换type的时候\r\n    getdata=(type)=>{\r\n        console.log(\"initialPage:\"+this.state.initialPage);\r\n        // console.log(this.state.initialPage);\r\n        const data=  http.get(`/good/type/`+type)\r\n        data.then(res=>{\r\n            this.setState({typedata:res.data,type});\r\n            this.showdata(type)\r\n        })\r\n    }\r\n    add=(gid)=>{\r\n        // console.log(gid);\r\n        //根据商品id先查询这个商品信息，然后加到购物车\r\n        http.get('/good/getgood/'+gid).then(res=>{\r\n            // console.log(res);\r\n          //获取改商品信息\r\n          let goodmsg= res.data.p[0];\r\n        //   goodmsg.weight1++;\r\n          //然后存到数据库，购物车那边再调用\r\n        //   console.log(goodmsg);\r\n          http.post('/shopcar/addgoods',{\r\n              gid:goodmsg.gid,\r\n              img:goodmsg.img,\r\n              cname:goodmsg.chtitle,\r\n              ename:goodmsg.egtitle,\r\n              weight:goodmsg.weight,\r\n              weight1:1,\r\n              weight2:goodmsg.weight2,\r\n              weight3:goodmsg.weight3,\r\n              weight4:goodmsg.weight4,\r\n              price:goodmsg.price}).then(res=>{\r\n            // console.log(res);\r\n          //成功后弹出提醒\r\n          if(res.flag){\r\n            successToast()\r\n          }\r\n          \r\n          })\r\n        });\r\n      }\r\n    //不同类型商品跳转不同页面\r\n    showdata=(type)=>{\r\n        let typename=''\r\n        let typrtitle=''\r\n        switch(type){\r\n            case 'cake':typename='蛋糕';typrtitle='新鲜乳脂奶油蛋糕';\r\n                break;\r\n            case 'icecream':typename='冰淇淋';typrtitle='10天生命的意式杰拉朵冰淇淋';\r\n                break;\r\n            case 'tea':typename='奶羹和雪酪';typrtitle='奶羹和雪酪';\r\n                break;\r\n            case 'bread':typename='面包';typrtitle='面包';\r\n                break;\r\n        }\r\n        return (\r\n            <div className='list-pro-box'>\r\n                <div className='pro-list-title' id='list-title-1'>\r\n                    <h2>\r\n                        {typename}\r\n                        <span>{typrtitle}</span>\r\n                    </h2>\r\n                </div>\r\n                <div className='list-box'>\r\n                    <ul>\r\n                        {this.state.typedata.map(item=>(\r\n                            <li id='list-goods-'  key={item.gid}>\r\n                                <div className='list-goods-pdleft'>\r\n                                    <div className='list-pro-content'>\r\n                                        <a title={item.chtitle} onClick={this.gogoods.bind(null,item.gid)}>\r\n                                            <div className='list-pro-img' >\r\n                                                <img src={item.img}></img>\r\n                                            </div>\r\n                                            <h3 >\r\n                                            {item.egtitle}\r\n                                            <span >{item.chtitle}</span>\r\n                                            </h3>\r\n                                            <span className='price'>{`¥${item.price}.00/454g(1.0磅)`}</span>\r\n                                            <div className='label'>\r\n                                                <img src='https://m.21cake.com/upload/images/1e22720bd656f7bac246159010c7e1f4.png'></img>\r\n                                            </div>\r\n                                        </a>\r\n                                        <a className='cart-add' name='cart-add_1318' data-id='1318' onClick={this.add.bind(null,item.gid)}>\r\n                                            <img src='https://static.21cake.com//themes/wap/img/list-cart.png'></img>\r\n                                        </a>\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            )\r\n    }\r\n    //对应商品跳转到详情页面\r\n    gogoods=(gid)=>{\r\n        this.props.history.push(`/goods/${gid}`)\r\n    }\r\n    \r\n    render() {\r\n        const {typedata}=this.state;\r\n        return (\r\n            <div className=\"type\">\r\n                <Tabs tabs={this.state.tabs}\r\n                //初始化值\r\n                initialPage={this.state.initialPage}\r\n                //高亮字体颜色\r\n                tabBarActiveTextColor={'#442818'}\r\n                //切换type\r\n                onChange={(tab, index) => { this.getdata(tab.type)}}\r\n                >\r\n                    {typedata ? this.showdata.bind(null,this.state.type) : null}\r\n                    \r\n                </Tabs>\r\n                <div className='lost-bottom'>\r\n                    <div>没了</div>\r\n                </div>\r\n                <div className='footer'>\r\n                    <ul>\r\n                    <li id='appDownloadLink'>\r\n                        <a href='https://m.21cake.com/appdown.html'>下载APP</a>\r\n                    </li>\r\n                    <li>\r\n                        <a >联系我们</a>\r\n                    </li>\r\n                    <li>\r\n                        <a >全站公告</a>\r\n                    </li>\r\n                    <li>\r\n                        <a >生产经营资质</a>\r\n                    </li>\r\n                    </ul>\r\n                    <p>\r\n                    Copyright© 21Cake蛋糕官网商城 2007-2020, \r\n                    <br></br>        \r\n                    版权所有 \r\n                    <br></br>  \r\n                    京ICP备14006254号-1\r\n                    <br></br>  \r\n                    网站注册公司名称: 北京廿一客食品有限公司\r\n                    <br></br>  \r\n                    网站运营：廿一客（上海）电子商务有限公司\r\n                    <br></br>  \r\n                    上海廿一客食品有限公司分公司\r\n                    <br></br>  \r\n                    杭州廿一客食品有限公司\r\n                    <br></br>  \r\n                    广州廿一客食品有限公司\r\n                    <br></br>  \r\n                    北京廿一客食品有限公司\r\n                    <br></br>  \r\n                    深圳廿一客贸易有限公司\r\n                    <br></br>  \r\n                    天津廿一客食品有限公司\r\n                    <br></br>  \r\n                    广州廿一客食品贸易有限公司\r\n                    <br></br>  \r\n                    举实（上海）食品有限公司\r\n                    </p>\r\n                </div>\r\n          \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nType = withRouter(Type)\r\nexport default Type\r\n\r\n"]},"metadata":{},"sourceType":"module"}