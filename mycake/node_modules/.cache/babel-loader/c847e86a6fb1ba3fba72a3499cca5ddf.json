{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport classNames from 'classnames';\nimport BaseComponent from './base';\nimport InputHandler from './InputHandler';\n\nfunction noop() {}\n\nfunction preventDefault(e) {\n  e.preventDefault();\n}\n\nvar InputNumber = function (_BaseComponent) {\n  _inherits(InputNumber, _BaseComponent);\n\n  function InputNumber() {\n    _classCallCheck(this, InputNumber);\n\n    var _this = _possibleConstructorReturn(this, (InputNumber.__proto__ || Object.getPrototypeOf(InputNumber)).apply(this, arguments));\n\n    _this.setInput = function (input) {\n      _this.input = input;\n    };\n\n    return _this;\n  }\n\n  _createClass(InputNumber, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: 'componentWillUpdate',\n    value: function componentWillUpdate() {\n      try {\n        this.start = this.input.selectionStart;\n        this.end = this.input.selectionEnd;\n      } catch (e) {// Fix error in Chrome:\n        // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n        // http://stackoverflow.com/q/21177489/3040605\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.props.focusOnUpDown && this.state.focused) {\n        var selectionRange = this.input.setSelectionRange;\n\n        if (selectionRange && typeof selectionRange === 'function' && this.start !== undefined && this.end !== undefined && this.start !== this.end) {\n          this.input.setSelectionRange(this.start, this.end);\n        } else {\n          this.focus();\n        }\n      }\n    }\n  }, {\n    key: 'getRatio',\n    value: function getRatio(e) {\n      var ratio = 1;\n\n      if (e.metaKey || e.ctrlKey) {\n        ratio = 0.1;\n      } else if (e.shiftKey) {\n        ratio = 10;\n      }\n\n      return ratio;\n    }\n  }, {\n    key: 'getValueFromEvent',\n    value: function getValueFromEvent(e) {\n      return e.target.value;\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      this.input.focus();\n    }\n  }, {\n    key: 'formatWrapper',\n    value: function formatWrapper(num) {\n      if (this.props.formatter) {\n        return this.props.formatter(num);\n      }\n\n      return num;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classNames;\n\n      var props = _extends({}, this.props);\n\n      var _props$prefixCls = props.prefixCls,\n          prefixCls = _props$prefixCls === undefined ? '' : _props$prefixCls,\n          disabled = props.disabled,\n          readOnly = props.readOnly,\n          max = props.max,\n          min = props.min;\n      var classes = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls, true), _defineProperty(_classNames, props.className, !!props.className), _defineProperty(_classNames, prefixCls + '-disabled', disabled), _defineProperty(_classNames, prefixCls + '-focused', this.state.focused), _classNames));\n      var upDisabledClass = '';\n      var downDisabledClass = '';\n      var value = this.state.value;\n\n      if (value || value === 0) {\n        if (!isNaN(value)) {\n          var val = Number(value);\n\n          if (val >= max) {\n            upDisabledClass = prefixCls + '-handler-up-disabled';\n          }\n\n          if (val <= min) {\n            downDisabledClass = prefixCls + '-handler-down-disabled';\n          }\n        } else {\n          upDisabledClass = prefixCls + '-handler-up-disabled';\n          downDisabledClass = prefixCls + '-handler-down-disabled';\n        }\n      }\n\n      var editable = !props.readOnly && !props.disabled; // focus state, show input value\n      // unfocus state, show valid value\n\n      var inputDisplayValue = void 0;\n\n      if (this.state.focused) {\n        inputDisplayValue = this.state.inputValue;\n      } else {\n        inputDisplayValue = this.toPrecisionAsStep(this.state.value);\n      }\n\n      if (inputDisplayValue === undefined || inputDisplayValue === null) {\n        inputDisplayValue = '';\n      }\n\n      var upEvents = void 0;\n      var downEvents = void 0;\n      upEvents = {\n        onTouchStart: editable && !upDisabledClass ? this.up : noop,\n        onTouchEnd: this.stop\n      };\n      downEvents = {\n        onTouchStart: editable && !downDisabledClass ? this.down : noop,\n        onTouchEnd: this.stop\n      };\n      var inputDisplayValueFormat = this.formatWrapper(inputDisplayValue);\n      var isUpDisabled = !!upDisabledClass || disabled || readOnly;\n      var isDownDisabled = !!downDisabledClass || disabled || readOnly;\n      return React.createElement('div', {\n        className: classes,\n        style: props.style\n      }, React.createElement('div', {\n        className: prefixCls + '-handler-wrap'\n      }, React.createElement(InputHandler, _extends({\n        disabled: isUpDisabled,\n        prefixCls: prefixCls,\n        unselectable: 'unselectable'\n      }, upEvents, {\n        role: 'button',\n        'aria-label': 'Increase Value',\n        'aria-disabled': !!isUpDisabled,\n        className: prefixCls + '-handler ' + prefixCls + '-handler-up ' + upDisabledClass\n      }), this.props.upHandler || React.createElement('span', {\n        unselectable: 'unselectable',\n        className: prefixCls + '-handler-up-inner',\n        onClick: preventDefault\n      })), React.createElement(InputHandler, _extends({\n        disabled: isDownDisabled,\n        prefixCls: prefixCls,\n        unselectable: 'unselectable'\n      }, downEvents, {\n        role: 'button',\n        'aria-label': 'Decrease Value',\n        'aria-disabled': !!isDownDisabled,\n        className: prefixCls + '-handler ' + prefixCls + '-handler-down ' + downDisabledClass\n      }), this.props.downHandler || React.createElement('span', {\n        unselectable: 'unselectable',\n        className: prefixCls + '-handler-down-inner',\n        onClick: preventDefault\n      }))), React.createElement('div', {\n        className: prefixCls + '-input-wrap',\n        role: 'spinbutton',\n        'aria-valuemin': props.min,\n        'aria-valuemax': props.max,\n        'aria-valuenow': value\n      }, React.createElement('input', {\n        className: prefixCls + '-input',\n        tabIndex: props.tabIndex,\n        autoComplete: 'off',\n        onFocus: this.onFocus,\n        onBlur: this.onBlur,\n        autoFocus: props.autoFocus,\n        readOnly: props.readOnly,\n        disabled: props.disabled,\n        max: props.max,\n        min: props.min,\n        step: props.step,\n        onChange: this.onChange,\n        ref: this.setInput,\n        value: inputDisplayValueFormat\n      })));\n    }\n  }]);\n\n  return InputNumber;\n}(BaseComponent);\n\nexport default InputNumber;\nInputNumber.defaultProps = _extends({}, BaseComponent.defaultProps, {\n  focusOnUpDown: false,\n  useTouch: false,\n  prefixCls: 'rmc-input-number'\n});","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/node_modules/rmc-input-number/es/index.js"],"names":["_defineProperty","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","classNames","BaseComponent","InputHandler","noop","preventDefault","e","InputNumber","_BaseComponent","_this","__proto__","Object","getPrototypeOf","apply","arguments","setInput","input","key","value","componentDidMount","componentDidUpdate","componentWillUpdate","start","selectionStart","end","selectionEnd","props","focusOnUpDown","state","focused","selectionRange","setSelectionRange","undefined","focus","getRatio","ratio","metaKey","ctrlKey","shiftKey","getValueFromEvent","target","formatWrapper","num","formatter","render","_classNames","_props$prefixCls","prefixCls","disabled","readOnly","max","min","classes","className","upDisabledClass","downDisabledClass","isNaN","val","Number","editable","inputDisplayValue","inputValue","toPrecisionAsStep","upEvents","downEvents","onTouchStart","up","onTouchEnd","stop","down","inputDisplayValueFormat","isUpDisabled","isDownDisabled","createElement","style","unselectable","role","upHandler","onClick","downHandler","tabIndex","autoComplete","onFocus","onBlur","autoFocus","step","onChange","ref","defaultProps","useTouch"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport classNames from 'classnames';\nimport BaseComponent from './base';\nimport InputHandler from './InputHandler';\nfunction noop() {}\nfunction preventDefault(e) {\n    e.preventDefault();\n}\n\nvar InputNumber = function (_BaseComponent) {\n    _inherits(InputNumber, _BaseComponent);\n\n    function InputNumber() {\n        _classCallCheck(this, InputNumber);\n\n        var _this = _possibleConstructorReturn(this, (InputNumber.__proto__ || Object.getPrototypeOf(InputNumber)).apply(this, arguments));\n\n        _this.setInput = function (input) {\n            _this.input = input;\n        };\n        return _this;\n    }\n\n    _createClass(InputNumber, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.componentDidUpdate();\n        }\n    }, {\n        key: 'componentWillUpdate',\n        value: function componentWillUpdate() {\n            try {\n                this.start = this.input.selectionStart;\n                this.end = this.input.selectionEnd;\n            } catch (e) {\n                // Fix error in Chrome:\n                // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n                // http://stackoverflow.com/q/21177489/3040605\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (this.props.focusOnUpDown && this.state.focused) {\n                var selectionRange = this.input.setSelectionRange;\n                if (selectionRange && typeof selectionRange === 'function' && this.start !== undefined && this.end !== undefined && this.start !== this.end) {\n                    this.input.setSelectionRange(this.start, this.end);\n                } else {\n                    this.focus();\n                }\n            }\n        }\n    }, {\n        key: 'getRatio',\n        value: function getRatio(e) {\n            var ratio = 1;\n            if (e.metaKey || e.ctrlKey) {\n                ratio = 0.1;\n            } else if (e.shiftKey) {\n                ratio = 10;\n            }\n            return ratio;\n        }\n    }, {\n        key: 'getValueFromEvent',\n        value: function getValueFromEvent(e) {\n            return e.target.value;\n        }\n    }, {\n        key: 'focus',\n        value: function focus() {\n            this.input.focus();\n        }\n    }, {\n        key: 'formatWrapper',\n        value: function formatWrapper(num) {\n            if (this.props.formatter) {\n                return this.props.formatter(num);\n            }\n            return num;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _classNames;\n\n            var props = _extends({}, this.props);\n            var _props$prefixCls = props.prefixCls,\n                prefixCls = _props$prefixCls === undefined ? '' : _props$prefixCls,\n                disabled = props.disabled,\n                readOnly = props.readOnly,\n                max = props.max,\n                min = props.min;\n\n            var classes = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls, true), _defineProperty(_classNames, props.className, !!props.className), _defineProperty(_classNames, prefixCls + '-disabled', disabled), _defineProperty(_classNames, prefixCls + '-focused', this.state.focused), _classNames));\n            var upDisabledClass = '';\n            var downDisabledClass = '';\n            var value = this.state.value;\n\n            if (value || value === 0) {\n                if (!isNaN(value)) {\n                    var val = Number(value);\n                    if (val >= max) {\n                        upDisabledClass = prefixCls + '-handler-up-disabled';\n                    }\n                    if (val <= min) {\n                        downDisabledClass = prefixCls + '-handler-down-disabled';\n                    }\n                } else {\n                    upDisabledClass = prefixCls + '-handler-up-disabled';\n                    downDisabledClass = prefixCls + '-handler-down-disabled';\n                }\n            }\n            var editable = !props.readOnly && !props.disabled;\n            // focus state, show input value\n            // unfocus state, show valid value\n            var inputDisplayValue = void 0;\n            if (this.state.focused) {\n                inputDisplayValue = this.state.inputValue;\n            } else {\n                inputDisplayValue = this.toPrecisionAsStep(this.state.value);\n            }\n            if (inputDisplayValue === undefined || inputDisplayValue === null) {\n                inputDisplayValue = '';\n            }\n            var upEvents = void 0;\n            var downEvents = void 0;\n            upEvents = {\n                onTouchStart: editable && !upDisabledClass ? this.up : noop,\n                onTouchEnd: this.stop\n            };\n            downEvents = {\n                onTouchStart: editable && !downDisabledClass ? this.down : noop,\n                onTouchEnd: this.stop\n            };\n            var inputDisplayValueFormat = this.formatWrapper(inputDisplayValue);\n            var isUpDisabled = !!upDisabledClass || disabled || readOnly;\n            var isDownDisabled = !!downDisabledClass || disabled || readOnly;\n            return React.createElement(\n                'div',\n                { className: classes, style: props.style },\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-handler-wrap' },\n                    React.createElement(\n                        InputHandler,\n                        _extends({ disabled: isUpDisabled, prefixCls: prefixCls, unselectable: 'unselectable' }, upEvents, { role: 'button', 'aria-label': 'Increase Value', 'aria-disabled': !!isUpDisabled, className: prefixCls + '-handler ' + prefixCls + '-handler-up ' + upDisabledClass }),\n                        this.props.upHandler || React.createElement('span', { unselectable: 'unselectable', className: prefixCls + '-handler-up-inner', onClick: preventDefault })\n                    ),\n                    React.createElement(\n                        InputHandler,\n                        _extends({ disabled: isDownDisabled, prefixCls: prefixCls, unselectable: 'unselectable' }, downEvents, { role: 'button', 'aria-label': 'Decrease Value', 'aria-disabled': !!isDownDisabled, className: prefixCls + '-handler ' + prefixCls + '-handler-down ' + downDisabledClass }),\n                        this.props.downHandler || React.createElement('span', { unselectable: 'unselectable', className: prefixCls + '-handler-down-inner', onClick: preventDefault })\n                    )\n                ),\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-input-wrap', role: 'spinbutton', 'aria-valuemin': props.min, 'aria-valuemax': props.max, 'aria-valuenow': value },\n                    React.createElement('input', { className: prefixCls + '-input', tabIndex: props.tabIndex, autoComplete: 'off', onFocus: this.onFocus, onBlur: this.onBlur, autoFocus: props.autoFocus, readOnly: props.readOnly, disabled: props.disabled, max: props.max, min: props.min, step: props.step, onChange: this.onChange, ref: this.setInput, value: inputDisplayValueFormat })\n                )\n            );\n        }\n    }]);\n\n    return InputNumber;\n}(BaseComponent);\n\nexport default InputNumber;\n\nInputNumber.defaultProps = _extends({}, BaseComponent.defaultProps, { focusOnUpDown: false, useTouch: false, prefixCls: 'rmc-input-number' });"]},"metadata":{},"sourceType":"module"}