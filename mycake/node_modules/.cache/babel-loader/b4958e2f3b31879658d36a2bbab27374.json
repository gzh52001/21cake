{"ast":null,"code":"var _jsxFileName = \"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\src\\\\pages\\\\Shopcar\\\\index.js\";\nimport React, { Component } from 'react';\nimport { NavBar, Modal, Button, WhiteSpace, WingBlank, Toast } from 'antd-mobile';\nimport { withRouter } from 'react-router-dom';\nimport './shopcar.css';\nimport http from '../../utils/http'; //弹出框\n\nconst alert = Modal.alert;\n\nconst showAlert = () => {\n  const alertInstance = alert('', '确定删除全部商品？', [{\n    text: 'Cancel',\n    onPress: () => console.log('cancel'),\n    style: 'default'\n  }, {\n    text: 'OK',\n    onPress: () => console.log('ok')\n  }]);\n  setTimeout(() => {\n    // 可以调用close方法以在外部close\n    console.log('auto close');\n    alertInstance.close();\n  }, 500000);\n};\n\nclass Shopcar extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tabs: [{\n        title: '蛋糕',\n        sub: '1'\n      }, {\n        title: '冰淇淋',\n        sub: '2'\n      }, {\n        title: '咖啡下午茶',\n        sub: '3'\n      }, {\n        title: '面包',\n        sub: '4'\n      }, {\n        title: '常温蛋糕',\n        sub: '5'\n      }, {\n        title: '设计师礼品',\n        sub: '6'\n      }],\n      goodslist: null,\n      val: 3,\n      allprice: 0\n    };\n\n    this.showdatalist = datalist => {};\n\n    this.goto = path => {\n      this.props.history.push(path);\n    };\n\n    this.onChange = val => {\n      this.setState({\n        val\n      });\n    };\n\n    this.add = (idx, gid, weight) => {\n      //idx用于修改goodlist（渲染到页面的数据），gid用于修改sqlgoodlist的数据，后面sqlgoodlist数据需要上传到数据库进行更新\n      //修改goodlist里面对应的数据\n      let goodslist = this.state.goodslist;\n      goodslist[idx].num++; //以及sqlgoodlist里面gid为xx的weightx数据加一\n\n      let sqlgoodlist = this.state.sqlgoodlist; // console.log(sqlgoodlist);\n\n      let si = '';\n\n      for (var i = 0; i < sqlgoodlist.length; i++) {\n        if (sqlgoodlist[i].gid == gid) {\n          sqlgoodlist[i][weight]++;\n          si = i;\n        }\n      }\n\n      this.setState({\n        goodslist,\n        sqlgoodlist\n      });\n      this.update(si);\n      this.allprice();\n    };\n\n    this.reduce = (idx, gid, weight) => {\n      let goodslist = this.state.goodslist; //最少为0，0的时候移除\n\n      if (goodslist[idx].num > 1) {\n        goodslist[idx].num--;\n      } else {\n        //变成0代表删除此数据\n        goodslist.splice(idx, 1);\n      }\n\n      let si = ''; //用来记录是第几条goodlist被修改\n\n      let sqlgoodlist = this.state.sqlgoodlist;\n\n      for (var i = 0; i < sqlgoodlist.length; i++) {\n        if (sqlgoodlist[i].gid == gid) {\n          //按道理华应该在这里进行判断，最少为0，不能删除因为这个是要传到数据库更新的\n          //但是因为goodslist有进行判断，当减成0删除数据所以不会触发到这里\n          sqlgoodlist[i][weight]--;\n          si = i;\n        }\n      }\n\n      this.setState({\n        goodslist,\n        sqlgoodlist\n      });\n      this.update(si);\n      this.allprice();\n    };\n\n    this.update = si => {\n      const sqlgoodlist = this.state.sqlgoodlist[si];\n      http.post('/shopcar/updategoods', sqlgoodlist).then(res => {// console.log(res);\n      });\n    };\n\n    this.dropall = () => {\n      var con = '';\n    };\n\n    this.gogoods = () => {\n      if (this.state.goodslist.length) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"cart-top-tip\",\n          id: \"top-notice\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 21\n          }\n        }, \"\\xB7 \\u6EE1100\\u5143\\u514D\\u914D\\u9001\\u670D\\u52A1\\u8D39 \\xB7\"), /*#__PURE__*/React.createElement(\"ul\", {\n          className: \"cart-pro-list\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 21\n          }\n        }, this.state.goodslist.map((item, idx) => /*#__PURE__*/React.createElement(\"li\", {\n          className: \"cart-object-goods-item scene_area\",\n          key: idx,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cart-pro-box\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: item.img,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 41\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cart-pro-title\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 45\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 49\n          }\n        }, item.cname), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 49\n          }\n        }, item.ename))), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"cart-select-pound\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 41\n          }\n        }, \"\\u89C4\\u683C\\uFF1A\", item.weighttitle, /*#__PURE__*/React.createElement(\"i\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 45\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"cart-price\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 41\n          }\n        }, \"\\uFFE5\", item.num * item.price, \".00\"))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"cart-pro-number\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"action-quantity-minus user-behavior-tj-analysis\",\n          onClick: this.reduce.bind(null, idx, item.gid, item.weight),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"https://static.21cake.com//themes/wap/img/-.png\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 41\n          }\n        })), /*#__PURE__*/React.createElement(\"span\", {\n          className: \"quantity \",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 37\n          }\n        }, item.num), /*#__PURE__*/React.createElement(\"a\", {\n          className: \"action-quantity-plus user-behavior-tj-analysis\",\n          onClick: this.add.bind(null, idx, item.gid, item.weight),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"https://static.21cake.com/themes/wap/img/+.png\",\n          alt: \"+\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 41\n          }\n        }))), /*#__PURE__*/React.createElement(\"p\", {\n          className: \"laid-count\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 33\n          }\n        }, \"\\u6BCF\\u4EFD\\u542B\\u514D\\u8D39\\u9910\\u5177\", item.canju, \"\\u5957\"), /*#__PURE__*/React.createElement(\"a\", {\n          className: \"birthday-brand\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 33\n          }\n        }, \"+\\u6DFB\\u52A0\\u751F\\u65E5\\u724C\")))), /*#__PURE__*/React.createElement(NavBar, {\n          mode: \"light\",\n          className: \"bottom-addcart-button\",\n          leftContent: [/*#__PURE__*/React.createElement(\"a\", {\n            key: \"0\",\n            className: \"order-delete-but user-behavior-tj-analysis\",\n            onClick: this.dropall.bind(null),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 29\n            }\n          })],\n          rightContent: [/*#__PURE__*/React.createElement(\"a\", {\n            key: \"0\",\n            className: \"place-order-but\",\n            onClick: this.openchange,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 25\n            }\n          }, \"\\u53BB\\u7ED3\\u7B97\")],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"pay-money\",\n          id: \"cart-total-amount\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"guodudiv\",\n          style: {\n            float: 'right',\n            height: '100%',\n            textAlign: 'right'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }\n        }, \"\\xA5\", /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 29\n          }\n        }, this.state.allprice, \".00\"), /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 29\n          }\n        }, \"\\u5546\\u54C1\")))));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"emptygood\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: \"https://static.21cake.com/themes/wap/img/cart-empty.png\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 25\n          }\n        }, \"\\u60A8\\u7684\\u8D2D\\u7269\\u8F66\\u91CC\\u8FD8\\u6CA1\\u6709\\u5546\\u54C1\"), /*#__PURE__*/React.createElement(\"a\", {\n          onClick: this.goto.bind(null, '/home'),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 25\n          }\n        }, \"\\u53BB\\u8D2D\\u7269....\"));\n      }\n    };\n\n    this.allprice = () => {\n      const {\n        goodslist\n      } = this.state;\n      let allprice = 0;\n      goodslist.map((item, idx) => {\n        allprice += item.num * item.price;\n      });\n      this.setState({\n        allprice\n      });\n    };\n  }\n\n  componentDidMount() {\n    //获取数据\n    http.get('/shopcar/getgoods', {\n      name: 'pdx'\n    }).then(res => {\n      //渲染\n      this.showdatalist(res.data.p);\n      let list = res.data.p; //用一个数组来存处理后的数据，因为weight1234分别对应不同规格的，所以每种规格都算一种商品\n\n      let datalist = [];\n\n      for (var i = 0; i < list.length; i++) {\n        // console.log(list[i]);//每一条数据\n        //每一条数据里面weight1234有值的\n        if (list[i].weight1 > 0) {\n          let smallist = {}; //用来存每条小数据的内容\n\n          smallist.gid = list[i].gid;\n          smallist.cname = list[i].cname;\n          smallist.ename = list[i].ename;\n          smallist.img = list[i].img;\n          smallist.price = list[i].price;\n          smallist.num = list[i].weight1;\n          smallist.canju = 5 * 1;\n          smallist.weighttitle = '454g(1.0磅)';\n          smallist.weight = 'weight1';\n          datalist.push(smallist);\n        }\n\n        if (list[i].weight2 > 0) {\n          let smallist = {}; //用来存每条小数据的内容\n\n          smallist.gid = list[i].gid;\n          smallist.cname = list[i].cname;\n          smallist.ename = list[i].ename;\n          smallist.img = list[i].img;\n          smallist.price = list[i].price * 2;\n          smallist.num = list[i].weight2;\n          smallist.canju = 5 * 2;\n          smallist.weighttitle = '908g(2.0磅)';\n          smallist.weight = 'weight2';\n          datalist.push(smallist);\n        }\n\n        if (list[i].weight3 > 0) {\n          let smallist = {}; //用来存每条小数据的内容\n\n          smallist.gid = list[i].gid;\n          smallist.cname = list[i].cname;\n          smallist.ename = list[i].ename;\n          smallist.img = list[i].img;\n          smallist.price = list[i].price * 3;\n          smallist.num = list[i].weight3;\n          smallist.canju = 5 * 3;\n          smallist.weighttitle = '1362g(3.0磅)';\n          smallist.weight = 'weight3';\n          datalist.push(smallist);\n        }\n\n        if (list[i].weight4 > 0) {\n          let smallist = {}; //用来存每条小数据的内容\n\n          smallist.gid = list[i].gid;\n          smallist.cname = list[i].cname;\n          smallist.ename = list[i].ename;\n          smallist.img = list[i].img;\n          smallist.price = list[i].price * 4;\n          smallist.num = list[i].weight4;\n          smallist.canju = 5 * 4;\n          smallist.weighttitle = '1816g(4.0磅)';\n          smallist.weight = 'weight4';\n          datalist.push(smallist);\n        }\n      }\n\n      this.setState({\n        goodslist: datalist,\n        sqlgoodlist: list\n      });\n      this.gogoods();\n      this.allprice();\n    });\n  } //\n\n\n  render() {\n    //要设一个常量来接收，不然会提示不是render里面的不能渲染\n    const {\n      goodslist\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"shopcar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 13\n      }\n    }, goodslist ? this.gogoods() : null);\n  }\n\n}\n\nShopcar = withRouter(Shopcar);\nexport default Shopcar;","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/src/pages/Shopcar/index.js"],"names":["React","Component","NavBar","Modal","Button","WhiteSpace","WingBlank","Toast","withRouter","http","alert","showAlert","alertInstance","text","onPress","console","log","style","setTimeout","close","Shopcar","state","tabs","title","sub","goodslist","val","allprice","showdatalist","datalist","goto","path","props","history","push","onChange","setState","add","idx","gid","weight","num","sqlgoodlist","si","i","length","update","reduce","splice","post","then","res","dropall","con","gogoods","map","item","img","cname","ename","weighttitle","price","bind","canju","openchange","float","height","textAlign","componentDidMount","get","name","data","p","list","weight1","smallist","weight2","weight3","weight4","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { NavBar,Modal, Button, WhiteSpace, WingBlank, Toast } from 'antd-mobile';\r\nimport {withRouter} from 'react-router-dom';\r\nimport './shopcar.css'\r\nimport http from '../../utils/http'\r\n\r\n//弹出框\r\nconst alert = Modal.alert;\r\n\r\nconst showAlert = () => {\r\n  const alertInstance = alert('', '确定删除全部商品？', [\r\n    { text: 'Cancel', onPress: () => console.log('cancel'), style: 'default' },\r\n    { text: 'OK', onPress: () => console.log('ok') },\r\n  ]);\r\n  setTimeout(() => {\r\n    // 可以调用close方法以在外部close\r\n    console.log('auto close');\r\n    alertInstance.close();\r\n  }, 500000);\r\n};\r\n\r\nclass Shopcar extends Component {\r\n    state={\r\n        tabs:[\r\n                { title: '蛋糕', sub: '1' },\r\n                { title: '冰淇淋', sub: '2' },\r\n                { title: '咖啡下午茶', sub: '3' },\r\n                { title: '面包', sub: '4' },\r\n                { title: '常温蛋糕', sub: '5' },\r\n                { title: '设计师礼品', sub: '6' },\r\n            ],\r\n        goodslist:null,\r\n        val: 3,\r\n        allprice:0\r\n    }\r\n    componentDidMount(){\r\n        //获取数据\r\n        http.get('/shopcar/getgoods',{name:'pdx'}).then(res=>{\r\n            //渲染\r\n            this.showdatalist(res.data.p)\r\n            let list = res.data.p\r\n            //用一个数组来存处理后的数据，因为weight1234分别对应不同规格的，所以每种规格都算一种商品\r\n            let datalist=[];\r\n            for(var i=0;i<list.length;i++){\r\n                // console.log(list[i]);//每一条数据\r\n                    //每一条数据里面weight1234有值的\r\n                    if(list[i].weight1>0){\r\n                        let smallist={};//用来存每条小数据的内容\r\n                        smallist.gid=list[i].gid\r\n                        smallist.cname=list[i].cname\r\n                        smallist.ename=list[i].ename\r\n                        smallist.img=list[i].img\r\n                        smallist.price=list[i].price\r\n                        smallist.num=list[i].weight1\r\n                        smallist.canju=5*1\r\n                        smallist.weighttitle='454g(1.0磅)'\r\n                        smallist.weight='weight1'\r\n                        datalist.push(smallist)\r\n                    }\r\n                    if(list[i].weight2>0){\r\n                        let smallist={};//用来存每条小数据的内容\r\n                        smallist.gid=list[i].gid\r\n                        smallist.cname=list[i].cname\r\n                        smallist.ename=list[i].ename\r\n                        smallist.img=list[i].img\r\n                        smallist.price=list[i].price*2\r\n                        smallist.num=list[i].weight2\r\n                        smallist.canju=5*2\r\n                        smallist.weighttitle='908g(2.0磅)'\r\n                        smallist.weight='weight2'\r\n                        datalist.push(smallist)\r\n                    }\r\n                    if(list[i].weight3>0){\r\n                        let smallist={};//用来存每条小数据的内容\r\n                        smallist.gid=list[i].gid\r\n                        smallist.cname=list[i].cname\r\n                        smallist.ename=list[i].ename\r\n                        smallist.img=list[i].img\r\n                        smallist.price=list[i].price*3\r\n                        smallist.num=list[i].weight3\r\n                        smallist.canju=5*3\r\n                        smallist.weighttitle='1362g(3.0磅)'\r\n                        smallist.weight='weight3'\r\n                        datalist.push(smallist)\r\n                    }\r\n                    if(list[i].weight4>0){\r\n                        let smallist={};//用来存每条小数据的内容\r\n                        smallist.gid=list[i].gid\r\n                        smallist.cname=list[i].cname\r\n                        smallist.ename=list[i].ename\r\n                        smallist.img=list[i].img\r\n                        smallist.price=list[i].price*4\r\n                        smallist.num=list[i].weight4\r\n                        smallist.canju=5*4\r\n                        smallist.weighttitle='1816g(4.0磅)'\r\n                        smallist.weight='weight4'\r\n                        datalist.push(smallist)\r\n                    }\r\n            }\r\n            this.setState({goodslist:datalist,sqlgoodlist:list})\r\n            this.gogoods();\r\n            this.allprice()\r\n        })\r\n    }\r\n    //\r\n    showdatalist=(datalist)=>{\r\n    }\r\n    goto=(path)=>{\r\n        this.props.history.push(path);\r\n    }\r\n    //改变数量\r\n    onChange = (val) => {\r\n        this.setState({ val });\r\n      }\r\n    add=(idx,gid,weight)=>{\r\n        //idx用于修改goodlist（渲染到页面的数据），gid用于修改sqlgoodlist的数据，后面sqlgoodlist数据需要上传到数据库进行更新\r\n        //修改goodlist里面对应的数据\r\n        let goodslist =this.state.goodslist;\r\n        goodslist[idx].num++;\r\n        //以及sqlgoodlist里面gid为xx的weightx数据加一\r\n        \r\n        let sqlgoodlist =this.state.sqlgoodlist;\r\n        // console.log(sqlgoodlist);\r\n        let si='';\r\n        for(var i=0;i<sqlgoodlist.length;i++){\r\n            if(sqlgoodlist[i].gid==gid){\r\n                sqlgoodlist[i][weight]++\r\n                si=i;\r\n            }\r\n        }\r\n        this.setState({goodslist,sqlgoodlist});\r\n        this.update(si)\r\n        this.allprice()\r\n      }\r\n    reduce=(idx,gid,weight)=>{\r\n        let goodslist =this.state.goodslist\r\n        //最少为0，0的时候移除\r\n        if(goodslist[idx].num>1){\r\n            goodslist[idx].num--;\r\n        }else{\r\n            //变成0代表删除此数据\r\n            goodslist.splice(idx,1)\r\n        }\r\n        let si='';//用来记录是第几条goodlist被修改\r\n        let sqlgoodlist =this.state.sqlgoodlist;\r\n        for(var i=0;i<sqlgoodlist.length;i++){\r\n            if(sqlgoodlist[i].gid==gid){\r\n                //按道理华应该在这里进行判断，最少为0，不能删除因为这个是要传到数据库更新的\r\n                //但是因为goodslist有进行判断，当减成0删除数据所以不会触发到这里\r\n                sqlgoodlist[i][weight]--\r\n                si=i;\r\n            }\r\n        }\r\n        this.setState({goodslist,sqlgoodlist});\r\n        this.update(si)\r\n        this.allprice()\r\n    }\r\n    //每次修改进行更新\r\n    update=(si)=>{\r\n        const sqlgoodlist =this.state.sqlgoodlist[si]\r\n        http.post('/shopcar/updategoods',sqlgoodlist).then(res=>{\r\n            // console.log(res);\r\n        })\r\n    }\r\n    dropall=()=>{\r\n        var con=''\r\n    }\r\n    //判断有没有商品，如果没有商品就渲染空页面，有就渲染出来\r\n    gogoods=()=>{\r\n        if(this.state.goodslist.length){\r\n            return (\r\n                <div>\r\n                    {/* 底部 */}\r\n                    \r\n                    <p className='cart-top-tip' id='top-notice'>\r\n                    · 满100元免配送服务费 ·\r\n                    </p>\r\n                    <ul className='cart-pro-list'>\r\n                        {this.state.goodslist.map((item,idx)=>(\r\n                            <li className='cart-object-goods-item scene_area' key={idx}>\r\n                                <div className='cart-pro-box'>\r\n                                    <a>\r\n                                        <img src={item.img}></img>\r\n                                    </a>\r\n                                    <div className='cart-pro-title'>\r\n                                        <div>\r\n                                            <h2>\r\n                                                <span>{item.cname}</span>\r\n                                                <span>{item.ename}</span>\r\n                                            </h2>\r\n                                        </div>\r\n                                        <span className='cart-select-pound'>\r\n                                            规格：{item.weighttitle}\r\n                                            <i></i>\r\n                                        </span>\r\n                                        <span className='cart-price'>\r\n                                            ￥{item.num*item.price}.00\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className='cart-pro-number'>\r\n                                    <a className='action-quantity-minus user-behavior-tj-analysis' onClick={this.reduce.bind(null,idx,item.gid,item.weight)}>\r\n                                        <img src='https://static.21cake.com//themes/wap/img/-.png'></img>\r\n                                    </a>\r\n                                    <span className='quantity '>{item.num}</span>\r\n                                    <a className='action-quantity-plus user-behavior-tj-analysis' onClick={this.add.bind(null,idx,item.gid,item.weight)}>\r\n                                        <img src='https://static.21cake.com/themes/wap/img/+.png' alt='+'></img>\r\n                                    </a>\r\n                                </div>\r\n                                <p className='laid-count'>每份含免费餐具{item.canju}套</p>\r\n                                <a className='birthday-brand'>+添加生日牌</a>\r\n                            </li>\r\n                        ))}\r\n                        \r\n                    </ul>\r\n                    <NavBar\r\n                    mode=\"light\"\r\n                    className='bottom-addcart-button'\r\n                    leftContent={[\r\n                            <a key='0'  className='order-delete-but user-behavior-tj-analysis' onClick={this.dropall.bind(null)}></a>\r\n                        \r\n                    ]}\r\n                    rightContent={[\r\n                        <a key='0'  className='place-order-but'  onClick={this.openchange}>去结算</a>\r\n                    ]}>\r\n                    <div className='pay-money' id='cart-total-amount'>\r\n                        <div className='guodudiv' style={{float:'right',height:'100%',textAlign:'right'}}>¥\r\n                            <span>{this.state.allprice}.00</span>\r\n                            <span>商品</span>\r\n                        </div>\r\n                    </div>\r\n                    </NavBar>\r\n                </div>)\r\n        }else{\r\n            return (\r\n                    <div className='emptygood'>\r\n                        <img src='https://static.21cake.com/themes/wap/img/cart-empty.png'></img>\r\n                        <p>您的购物车里还没有商品</p>\r\n                        <a onClick={this.goto.bind(null,'/home')}>去购物....</a>\r\n                    </div>\r\n                )\r\n       }\r\n    }\r\n    //总价\r\n    allprice=()=>{\r\n        const {goodslist}=this.state;\r\n        let allprice=0;\r\n        goodslist.map((item,idx)=>{\r\n            allprice+=item.num*item.price\r\n        })\r\n        this.setState({allprice})\r\n    }\r\n    render() {\r\n        //要设一个常量来接收，不然会提示不是render里面的不能渲染\r\n        const {goodslist} =this.state;\r\n        return (\r\n            <div className='shopcar'>\r\n                {/* 这里不能写bind的，不然会报错 */}\r\n                {goodslist ? this.gogoods(): null}\r\n                {/* {this.goodslist.bind(null,1) ?  navbar : <div>想屁吃</div>} */}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nShopcar = withRouter(Shopcar)\r\nexport default Shopcar\r\n"]},"metadata":{},"sourceType":"module"}