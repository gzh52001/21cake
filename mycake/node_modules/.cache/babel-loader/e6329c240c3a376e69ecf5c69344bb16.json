{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM, { findDOMNode } from 'react-dom';\nimport contains from 'rc-util/es/Dom/contains';\nimport addEventListener from 'rc-util/lib/Dom/addEventListener';\nimport Popup from './Popup';\nimport { getAlignFromPlacement, getPopupClassNameFromAlign } from './utils';\nvar IS_REACT_16 = !!React.createPortal;\n\nfunction noop() {}\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nvar Trigger = function (_React$Component) {\n  _inherits(Trigger, _React$Component);\n\n  function Trigger() {\n    _classCallCheck(this, Trigger);\n\n    var _this = _possibleConstructorReturn(this, (Trigger.__proto__ || Object.getPrototypeOf(Trigger)).apply(this, arguments));\n\n    _this.onDocumentClick = function (event) {\n      if (_this.props.mask && !_this.props.maskClosable) {\n        return;\n      }\n\n      var target = event.target;\n      var root = findDOMNode(_this);\n\n      var popupNode = _this.getPopupDomNode();\n\n      if (!contains(root, target) && !contains(popupNode, target)) {\n        _this.close();\n      }\n    };\n\n    _this.getPopupAlign = function () {\n      var props = _this.props;\n      var popupPlacement = props.popupPlacement,\n          popupAlign = props.popupAlign,\n          builtinPlacements = props.builtinPlacements;\n\n      if (popupPlacement && builtinPlacements) {\n        return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n      }\n\n      return popupAlign;\n    };\n\n    _this.getRootDomNode = function () {\n      return findDOMNode(_this);\n    };\n\n    _this.getPopupClassNameFromAlign = function (align) {\n      var className = [];\n      var props = _this.props;\n      var popupPlacement = props.popupPlacement,\n          builtinPlacements = props.builtinPlacements,\n          prefixCls = props.prefixCls;\n\n      if (popupPlacement && builtinPlacements) {\n        className.push(getPopupClassNameFromAlign(builtinPlacements, prefixCls, align));\n      }\n\n      if (props.getPopupClassNameFromAlign) {\n        className.push(props.getPopupClassNameFromAlign(align));\n      }\n\n      return className.join(' ');\n    };\n\n    _this.close = function () {\n      if (_this.props.onClose) {\n        _this.props.onClose();\n      }\n    };\n\n    _this.onAnimateLeave = function () {\n      if (_this.props.destroyPopupOnHide) {\n        var container = _this._container;\n\n        if (container) {\n          ReactDOM.unmountComponentAtNode(container);\n          container.parentNode.removeChild(container);\n        }\n      }\n    };\n\n    _this.removeContainer = function () {\n      var container = document.querySelector('#' + _this.props.prefixCls + '-container');\n\n      if (container) {\n        ReactDOM.unmountComponentAtNode(container);\n        container.parentNode.removeChild(container);\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Trigger, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.visible) {\n        this.componentDidUpdate();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.visible) {\n        if (!IS_REACT_16) {\n          this.renderDialog(false);\n        }\n      }\n\n      this.clearOutsideHandler();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      var _this2 = this;\n\n      if (!IS_REACT_16) {\n        this.renderDialog(this.props.visible);\n      }\n\n      if (this.props.visible) {\n        if (!this.touchOutsideHandler) {\n          this.touchOutsideHandler = setTimeout(function () {\n            var currentDocument = _this2.props.getDocument();\n\n            _this2.touchOutsideHandler = addEventListener(currentDocument, 'touchend', _this2.onDocumentClick);\n          });\n        }\n\n        return;\n      }\n\n      this.clearOutsideHandler();\n    }\n  }, {\n    key: 'clearOutsideHandler',\n    value: function clearOutsideHandler() {\n      if (this.touchOutsideHandler) {\n        if (this.touchOutsideHandler.remove) {\n          this.touchOutsideHandler.remove();\n        }\n\n        this.touchOutsideHandler = null;\n      }\n    }\n  }, {\n    key: 'getPopupDomNode',\n    value: function getPopupDomNode() {\n      if (this._component && this._component.getPopupDomNode) {\n        return this._component.getPopupDomNode();\n      }\n\n      return null;\n    }\n  }, {\n    key: 'saveRef',\n    value: function saveRef(el, visible) {\n      this.popupRef = el;\n      this._component = el;\n      this.props.afterPopupVisibleChange(visible);\n    }\n  }, {\n    key: 'getComponent',\n    value: function getComponent(visible) {\n      var _this3 = this;\n\n      var props = _extends({}, this.props);\n\n      ['visible', 'onAnimateLeave'].forEach(function (key) {\n        if (props.hasOwnProperty(key)) {\n          delete props[key];\n        }\n      });\n      return React.createElement(Popup, {\n        key: 'popup',\n        ref: function ref(el) {\n          return _this3.saveRef(el, visible);\n        },\n        prefixCls: props.prefixCls,\n        destroyPopupOnHide: props.destroyPopupOnHide,\n        visible: visible,\n        className: props.popupClassName,\n        align: this.getPopupAlign(),\n        onAlign: props.onPopupAlign,\n        animation: props.popupAnimation,\n        getClassNameFromAlign: this.getPopupClassNameFromAlign,\n        getRootDomNode: this.getRootDomNode,\n        style: props.popupStyle,\n        mask: props.mask,\n        zIndex: props.zIndex,\n        transitionName: props.popupTransitionName,\n        maskAnimation: props.maskAnimation,\n        maskTransitionName: props.maskTransitionName,\n        onAnimateLeave: this.onAnimateLeave\n      }, typeof props.popup === 'function' ? props.popup() : props.popup);\n    }\n  }, {\n    key: 'getContainer',\n    value: function getContainer() {\n      if (!this._container) {\n        var props = this.props;\n        var popupContainer = document.createElement('div');\n        popupContainer.style.position = 'absolute';\n        popupContainer.style.top = '0';\n        popupContainer.style.left = '0';\n        popupContainer.style.width = '100%';\n        var mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(this)) : props.getDocument().body;\n        mountNode.appendChild(popupContainer);\n        this._container = popupContainer;\n      }\n\n      return this._container;\n    }\n  }, {\n    key: 'renderDialog',\n    value: function renderDialog(visible) {\n      ReactDOM.unstable_renderSubtreeIntoContainer(this, this.getComponent(visible), this.getContainer());\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var props = this.props;\n      var children = props.children;\n      var child = React.Children.only(children);\n      var newChildProps = {\n        onClick: this.props.onTargetClick,\n        key: 'trigger'\n      };\n      var trigger = React.cloneElement(child, newChildProps);\n\n      if (!IS_REACT_16) {\n        return trigger;\n      }\n\n      var portal = void 0;\n\n      if (props.visible || this._component) {\n        portal = ReactDOM.createPortal(this.getComponent(props.visible), this.getContainer());\n      }\n\n      return [trigger, portal];\n    }\n  }]);\n\n  return Trigger;\n}(React.Component);\n\nexport default Trigger;\nTrigger.defaultProps = {\n  prefixCls: 'rc-trigger-popup',\n  getPopupClassNameFromAlign: returnEmptyString,\n  getDocument: returnDocument,\n  onPopupVisibleChange: noop,\n  afterPopupVisibleChange: noop,\n  onPopupAlign: noop,\n  popupClassName: '',\n  popupStyle: {},\n  destroyPopupOnHide: false,\n  popupAlign: {},\n  defaultPopupVisible: false,\n  mask: false,\n  maskClosable: true\n};","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/node_modules/rmc-trigger/es/Trigger.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","ReactDOM","findDOMNode","contains","addEventListener","Popup","getAlignFromPlacement","getPopupClassNameFromAlign","IS_REACT_16","createPortal","noop","returnEmptyString","returnDocument","window","document","Trigger","_React$Component","_this","__proto__","Object","getPrototypeOf","apply","arguments","onDocumentClick","event","props","mask","maskClosable","target","root","popupNode","getPopupDomNode","close","getPopupAlign","popupPlacement","popupAlign","builtinPlacements","getRootDomNode","align","className","prefixCls","push","join","onClose","onAnimateLeave","destroyPopupOnHide","container","_container","unmountComponentAtNode","parentNode","removeChild","removeContainer","querySelector","key","value","componentDidMount","visible","componentDidUpdate","componentWillUnmount","renderDialog","clearOutsideHandler","_this2","touchOutsideHandler","setTimeout","currentDocument","getDocument","remove","_component","saveRef","el","popupRef","afterPopupVisibleChange","getComponent","_this3","forEach","hasOwnProperty","createElement","ref","popupClassName","onAlign","onPopupAlign","animation","popupAnimation","getClassNameFromAlign","style","popupStyle","zIndex","transitionName","popupTransitionName","maskAnimation","maskTransitionName","popup","getContainer","popupContainer","position","top","left","width","mountNode","getPopupContainer","body","appendChild","unstable_renderSubtreeIntoContainer","render","children","child","Children","only","newChildProps","onClick","onTargetClick","trigger","cloneElement","portal","Component","defaultProps","onPopupVisibleChange","defaultPopupVisible"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport ReactDOM, { findDOMNode } from 'react-dom';\nimport contains from 'rc-util/es/Dom/contains';\nimport addEventListener from 'rc-util/lib/Dom/addEventListener';\nimport Popup from './Popup';\nimport { getAlignFromPlacement, getPopupClassNameFromAlign } from './utils';\nvar IS_REACT_16 = !!React.createPortal;\nfunction noop() {}\nfunction returnEmptyString() {\n    return '';\n}\nfunction returnDocument() {\n    return window.document;\n}\n\nvar Trigger = function (_React$Component) {\n    _inherits(Trigger, _React$Component);\n\n    function Trigger() {\n        _classCallCheck(this, Trigger);\n\n        var _this = _possibleConstructorReturn(this, (Trigger.__proto__ || Object.getPrototypeOf(Trigger)).apply(this, arguments));\n\n        _this.onDocumentClick = function (event) {\n            if (_this.props.mask && !_this.props.maskClosable) {\n                return;\n            }\n            var target = event.target;\n            var root = findDOMNode(_this);\n            var popupNode = _this.getPopupDomNode();\n            if (!contains(root, target) && !contains(popupNode, target)) {\n                _this.close();\n            }\n        };\n        _this.getPopupAlign = function () {\n            var props = _this.props;\n            var popupPlacement = props.popupPlacement,\n                popupAlign = props.popupAlign,\n                builtinPlacements = props.builtinPlacements;\n\n            if (popupPlacement && builtinPlacements) {\n                return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n            }\n            return popupAlign;\n        };\n        _this.getRootDomNode = function () {\n            return findDOMNode(_this);\n        };\n        _this.getPopupClassNameFromAlign = function (align) {\n            var className = [];\n            var props = _this.props;\n            var popupPlacement = props.popupPlacement,\n                builtinPlacements = props.builtinPlacements,\n                prefixCls = props.prefixCls;\n\n            if (popupPlacement && builtinPlacements) {\n                className.push(getPopupClassNameFromAlign(builtinPlacements, prefixCls, align));\n            }\n            if (props.getPopupClassNameFromAlign) {\n                className.push(props.getPopupClassNameFromAlign(align));\n            }\n            return className.join(' ');\n        };\n        _this.close = function () {\n            if (_this.props.onClose) {\n                _this.props.onClose();\n            }\n        };\n        _this.onAnimateLeave = function () {\n            if (_this.props.destroyPopupOnHide) {\n                var container = _this._container;\n                if (container) {\n                    ReactDOM.unmountComponentAtNode(container);\n                    container.parentNode.removeChild(container);\n                }\n            }\n        };\n        _this.removeContainer = function () {\n            var container = document.querySelector('#' + _this.props.prefixCls + '-container');\n            if (container) {\n                ReactDOM.unmountComponentAtNode(container);\n                container.parentNode.removeChild(container);\n            }\n        };\n        return _this;\n    }\n\n    _createClass(Trigger, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (this.props.visible) {\n                this.componentDidUpdate();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.props.visible) {\n                if (!IS_REACT_16) {\n                    this.renderDialog(false);\n                }\n            }\n            this.clearOutsideHandler();\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            var _this2 = this;\n\n            if (!IS_REACT_16) {\n                this.renderDialog(this.props.visible);\n            }\n            if (this.props.visible) {\n                                if (!this.touchOutsideHandler) {\n                                                            this.touchOutsideHandler = setTimeout(function () {\n                        var currentDocument = _this2.props.getDocument();\n                        _this2.touchOutsideHandler = addEventListener(currentDocument, 'touchend', _this2.onDocumentClick);\n                    });\n                }\n                return;\n            }\n            this.clearOutsideHandler();\n        }\n    }, {\n        key: 'clearOutsideHandler',\n        value: function clearOutsideHandler() {\n            if (this.touchOutsideHandler) {\n                if (this.touchOutsideHandler.remove) {\n                    this.touchOutsideHandler.remove();\n                }\n                this.touchOutsideHandler = null;\n            }\n        }\n    }, {\n        key: 'getPopupDomNode',\n        value: function getPopupDomNode() {\n                        if (this._component && this._component.getPopupDomNode) {\n                return this._component.getPopupDomNode();\n            }\n            return null;\n        }\n    }, {\n        key: 'saveRef',\n        value: function saveRef(el, visible) {\n            this.popupRef = el;\n            this._component = el;\n            this.props.afterPopupVisibleChange(visible);\n        }\n    }, {\n        key: 'getComponent',\n        value: function getComponent(visible) {\n            var _this3 = this;\n\n            var props = _extends({}, this.props);\n            ['visible', 'onAnimateLeave'].forEach(function (key) {\n                if (props.hasOwnProperty(key)) {\n                    delete props[key];\n                }\n            });\n            return React.createElement(\n                Popup,\n                { key: 'popup', ref: function ref(el) {\n                        return _this3.saveRef(el, visible);\n                    }, prefixCls: props.prefixCls, destroyPopupOnHide: props.destroyPopupOnHide, visible: visible, className: props.popupClassName, align: this.getPopupAlign(), onAlign: props.onPopupAlign, animation: props.popupAnimation, getClassNameFromAlign: this.getPopupClassNameFromAlign, getRootDomNode: this.getRootDomNode, style: props.popupStyle, mask: props.mask, zIndex: props.zIndex, transitionName: props.popupTransitionName, maskAnimation: props.maskAnimation, maskTransitionName: props.maskTransitionName, onAnimateLeave: this.onAnimateLeave },\n                typeof props.popup === 'function' ? props.popup() : props.popup\n            );\n        }\n    }, {\n        key: 'getContainer',\n        value: function getContainer() {\n            if (!this._container) {\n                var props = this.props;\n                var popupContainer = document.createElement('div');\n                                                popupContainer.style.position = 'absolute';\n                popupContainer.style.top = '0';\n                popupContainer.style.left = '0';\n                popupContainer.style.width = '100%';\n                var mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(this)) : props.getDocument().body;\n                mountNode.appendChild(popupContainer);\n                this._container = popupContainer;\n            }\n            return this._container;\n        }\n    }, {\n        key: 'renderDialog',\n        value: function renderDialog(visible) {\n            ReactDOM.unstable_renderSubtreeIntoContainer(this, this.getComponent(visible), this.getContainer());\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var props = this.props;\n            var children = props.children;\n            var child = React.Children.only(children);\n            var newChildProps = {\n                onClick: this.props.onTargetClick,\n                key: 'trigger'\n            };\n            var trigger = React.cloneElement(child, newChildProps);\n            if (!IS_REACT_16) {\n                return trigger;\n            }\n            var portal = void 0;\n                        if (props.visible || this._component) {\n                portal = ReactDOM.createPortal(this.getComponent(props.visible), this.getContainer());\n            }\n            return [trigger, portal];\n        }\n    }]);\n\n    return Trigger;\n}(React.Component);\n\nexport default Trigger;\n\nTrigger.defaultProps = {\n    prefixCls: 'rc-trigger-popup',\n    getPopupClassNameFromAlign: returnEmptyString,\n    getDocument: returnDocument,\n    onPopupVisibleChange: noop,\n    afterPopupVisibleChange: noop,\n    onPopupAlign: noop,\n    popupClassName: '',\n    popupStyle: {},\n    destroyPopupOnHide: false,\n    popupAlign: {},\n    defaultPopupVisible: false,\n    mask: false,\n    maskClosable: true\n};"]},"metadata":{},"sourceType":"module"}