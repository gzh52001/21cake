{"ast":null,"code":"var _jsxFileName = \"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\src\\\\pages\\\\login\\\\index.js\";\n//注册页面\nimport React, { Component } from 'react';\nimport 'antd-mobile/dist/antd-mobile.css';\nimport './login.css';\nimport './base.css';\nimport http from '../../utils/http';\nimport { DatePicker, List } from 'antd-mobile';\nconst nowTimeStamp = Date.now();\nconst now = new Date(nowTimeStamp); // GMT is not currently observed in the UK. So use UTC now.\n\nconst utcNow = new Date(now.getTime() + now.getTimezoneOffset() * 60000); // Make sure that in `time` mode, the maxDate and minDate are within one day.\n\nlet minDate = new Date(nowTimeStamp - 1e7);\nconst maxDate = new Date(nowTimeStamp + 1e7); // console.log(minDate, maxDate);\n\nif (minDate.getDate() !== maxDate.getDate()) {\n  // set the minDate to the 0 of maxDate\n  minDate = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate());\n}\n\nfunction formatDate(date) {\n  /* eslint no-confusing-arrow: 0 */\n  const pad = n => n < 10 ? `0${n}` : n;\n\n  const dateStr = `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;\n  const timeStr = `${pad(date.getHours())}:${pad(date.getMinutes())}`;\n  return `${dateStr} ${timeStr}`;\n} // If not using `List.Item` as children\n// The `onClick / extra` props need to be processed within the component\n\n\nconst CustomChildren = ({\n  extra,\n  onClick,\n  children\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  onClick: onClick,\n  style: {\n    backgroundColor: '#fff',\n    height: '45px',\n    lineHeight: '45px',\n    padding: '0 15px'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 3\n  }\n}, children, /*#__PURE__*/React.createElement(\"span\", {\n  style: {\n    float: 'right',\n    color: '#888'\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }\n}, extra));\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      date: now,\n      time: now,\n      utcDate: utcNow,\n      dpValue: null,\n      customChildValue: null,\n      visible: false\n    };\n\n    this.login = () => {\n      let phone = document.getElementsByClassName(\"phone\")[0].value;\n      let psw = document.getElementsByClassName(\"pas2\")[0].value;\n      let birthday = document.getElementsByClassName(\"am-list-extra\")[0].innerHTML;\n      console.log(phone, psw, birthday); //判断四个报错信息是否出现\n\n      let m1234 = this.state.m1 && this.state.m2 && this.state.m3 && this.state.m4;\n\n      if (phone && psw && m1234) {\n        //填写了账号密码，且无报错信息才可注册\n        http.post('/user/reg', {\n          username: phone,\n          psw: psw,\n          birthday: birthday\n        }).then(res => {\n          console.log(res);\n\n          if (res.flag == true) {\n            setTimeout(alert(\"注册成功\"), 1000);\n            this.props.history.push('/sign');\n          }\n        });\n      }\n    };\n\n    this.err1 = () => {\n      let phone = document.getElementsByClassName(\"phone\")[0].value; // 正则验证手机号码\n\n      let rule1 = /^[1][3,4,5,7,8][0-9]{9}$/;\n\n      if (rule1.test(phone) == false) {\n        document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"block\";\n        document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\n        document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\n        document.getElementsByClassName(\"repeat\")[0].style.display = \"none\";\n        this.setState({\n          m1: false\n        });\n      } else {\n        document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\n        this.setState({\n          m1: true\n        });\n      } //验证账号是否已被注册\n\n\n      if (phone) {\n        //验证账号是否为空\n        http.get('/user/checkname', {\n          username: phone\n        }).then(res => {\n          console.log(res.flag); //向后台验证账号\n\n          if (res.flag == false) {\n            document.getElementsByClassName(\"repeat\")[0].style.display = \"block\";\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\n            this.setState({\n              m2: false\n            });\n          } else {\n            document.getElementsByClassName(\"repeat\")[0].style.display = \"none\";\n            this.setState({\n              m2: true\n            });\n          }\n        });\n      }\n    };\n\n    this.err2 = () => {\n      let pas1 = document.getElementsByClassName(\"pas1\")[0].value;\n      let rule2 = /^[a-zA-Z\\d!@#$%^&*]{8,20}$/;\n\n      if (rule2.test(pas1) == false) {\n        document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\n        document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"block\";\n        document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\n        this.setState({\n          m3: false\n        });\n      } else {\n        document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\n        this.setState({\n          m3: true\n        });\n      }\n    };\n\n    this.err3 = () => {\n      let pas1 = document.getElementsByClassName(\"pas1\")[0].value;\n      let pas2 = document.getElementsByClassName(\"pas2\")[0].value;\n\n      if (pas1 !== pas2) {\n        document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\n        document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\n        document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"block\";\n        this.setState({\n          m4: false\n        });\n      } else {\n        document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\n        this.setState({\n          m4: true\n        });\n      }\n    };\n\n    this.gotosign = () => {\n      this.props.history.push('/sign');\n    };\n  }\n\n  // async componentDidMount(){\n  //     const {data} = await http.post('/login/index',{})\n  // }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"login-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }, \"\\u7528\\u6237\\u6CE8\\u518C\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"phone\",\n      onBlur: this.err1,\n      type: \"text\",\n      placeholder: \"\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"pas1\",\n      onBlur: this.err2,\n      type: \"password\",\n      placeholder: \"\\u5BC6\\u7801\\uFF1A8\\uFF5E20\\u5B57\\u7B26\\uFF0C\\u9700\\u540C\\u65F6\\u5305\\u542B\\u82F1\\u6587\\u548C\\u6570\\u5B57\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"pas2\",\n      onBlur: this.err3,\n      type: \"password\",\n      placeholder: \"\\u786E\\u8BA4\\u5BC6\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(List, {\n      className: \"date-picker-list\",\n      style: {\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      value: this.state.date,\n      onChange: date => this.setState({\n        date\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(DatePicker, {\n      mode: \"date\",\n      title: \"\\u8BF7\\u9009\\u62E9\\u751F\\u65E5\",\n      extra: \"Optional\",\n      value: this.state.date,\n      onChange: date => this.setState({\n        date\n      }),\n      minDate: new Date(1930, 1, 1, 23, 59, 59),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(List.Item, {\n      arrow: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 29\n      }\n    }, \"\\u8BF7\\u9009\\u62E9\\u751F\\u65E5\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"erroBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"repeat\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 51\n      }\n    }), \"\\xA0 \\u8BE5\\u8D26\\u53F7\\u5DF2\\u88AB\\u6CE8\\u518C \"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"errmsg-pho\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 55\n      }\n    }), \" \\xA0 \\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u7684\\u624B\\u673A\\u53F7\\u7801\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"errmsg-pas1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 56\n      }\n    }), \" \\xA0 \\u5BC6\\u7801\\uFF1A8\\uFF5E20\\u5B57\\u7B26\\uFF0C\\u9700\\u540C\\u65F6\\u5305\\u542B\\u82F1\\u6587\\u548C\\u6570\\u5B57\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"errmsg-pas2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 56\n      }\n    }), \" \\xA0 \\u4E24\\u6B21\\u5BC6\\u7801\\u4E0D\\u4E00\\u81F4\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.login,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 29\n      }\n    }, \"\\u6CE8\\u518C\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gotosign\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onClick: this.gotosign,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 29\n      }\n    }, \"\\u53BB\\u767B\\u5F55\"))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/src/pages/login/index.js"],"names":["React","Component","http","DatePicker","List","nowTimeStamp","Date","now","utcNow","getTime","getTimezoneOffset","minDate","maxDate","getDate","getFullYear","getMonth","formatDate","date","pad","n","dateStr","timeStr","getHours","getMinutes","CustomChildren","extra","onClick","children","backgroundColor","height","lineHeight","padding","float","color","Login","state","time","utcDate","dpValue","customChildValue","visible","login","phone","document","getElementsByClassName","value","psw","birthday","innerHTML","console","log","m1234","m1","m2","m3","m4","post","username","then","res","flag","setTimeout","alert","props","history","push","err1","rule1","test","style","display","setState","get","err2","pas1","rule2","err3","pas2","gotosign","render"],"mappings":"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","sourcesContent":["//注册页面\r\nimport React, { Component } from 'react';\r\nimport 'antd-mobile/dist/antd-mobile.css';\r\nimport './login.css';\r\nimport './base.css';\r\nimport http from '../../utils/http';\r\n\r\nimport { DatePicker, List } from 'antd-mobile';\r\n\r\nconst nowTimeStamp = Date.now();\r\nconst now = new Date(nowTimeStamp);\r\n// GMT is not currently observed in the UK. So use UTC now.\r\nconst utcNow = new Date(now.getTime() + (now.getTimezoneOffset() * 60000));\r\n\r\n// Make sure that in `time` mode, the maxDate and minDate are within one day.\r\nlet minDate = new Date(nowTimeStamp - 1e7);\r\nconst maxDate = new Date(nowTimeStamp + 1e7);\r\n// console.log(minDate, maxDate);\r\nif (minDate.getDate() !== maxDate.getDate()) {\r\n  // set the minDate to the 0 of maxDate\r\n  minDate = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate());\r\n}\r\n\r\nfunction formatDate(date) {\r\n  /* eslint no-confusing-arrow: 0 */\r\n  const pad = n => n < 10 ? `0${n}` : n;\r\n  const dateStr = `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;\r\n  const timeStr = `${pad(date.getHours())}:${pad(date.getMinutes())}`;\r\n  return `${dateStr} ${timeStr}`;\r\n}\r\n\r\n// If not using `List.Item` as children\r\n// The `onClick / extra` props need to be processed within the component\r\nconst CustomChildren = ({ extra, onClick, children }) => (\r\n  <div\r\n    onClick={onClick}\r\n    style={{ backgroundColor: '#fff', height: '45px', lineHeight: '45px', padding: '0 15px' }}\r\n  >\r\n    {children}\r\n    <span style={{ float: 'right', color: '#888' }}>{extra}</span>\r\n  </div>\r\n);\r\n\r\nclass Login extends Component{\r\n\r\n    state = {\r\n        date: now,\r\n        time: now,\r\n        utcDate: utcNow,\r\n        dpValue: null,\r\n        customChildValue: null,\r\n        visible: false,\r\n      }\r\n\r\n    \r\n\r\n    \r\n    //注册按钮的点击事件\r\n    login =()=>{\r\n        let phone= document.getElementsByClassName(\"phone\")[0].value;\r\n        let psw= document.getElementsByClassName(\"pas2\")[0].value;\r\n        let birthday = document.getElementsByClassName(\"am-list-extra\")[0].innerHTML;\r\n    \r\n        console.log(phone,psw,birthday);\r\n        \r\n        //判断四个报错信息是否出现\r\n        let m1234 = this.state.m1&&this.state.m2&&this.state.m3&&this.state.m4;\r\n\r\n        if(phone&&psw&&m1234){//填写了账号密码，且无报错信息才可注册\r\n            http.post('/user/reg',{username:phone,psw:psw,birthday:birthday}).then((res)=>{\r\n                console.log(res);\r\n                if(res.flag == true){\r\n                    \r\n                    setTimeout( alert(\"注册成功\"), 1000);\r\n                    \r\n                    this.props.history.push('/sign');\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    //三个err函数用于正则提示信息的显示隐藏\r\n    err1 = ()=>{\r\n        let phone = document.getElementsByClassName(\"phone\")[0].value;\r\n        // 正则验证手机号码\r\n        let rule1 = /^[1][3,4,5,7,8][0-9]{9}$/;\r\n        if(rule1.test(phone)==false){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"block\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"repeat\")[0].style.display = \"none\";\r\n            this.setState({m1:false});\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n            this.setState({m1:true});\r\n        }\r\n\r\n        //验证账号是否已被注册\r\n        if(phone){//验证账号是否为空\r\n            http.get('/user/checkname',{username:phone}).then((res)=>{\r\n                console.log(res.flag);\r\n                //向后台验证账号\r\n                if(res.flag == false){\r\n                    document.getElementsByClassName(\"repeat\")[0].style.display = \"block\";\r\n                    document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n                    document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n                    document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n                    this.setState({m2:false})\r\n                }else{\r\n                    document.getElementsByClassName(\"repeat\")[0].style.display = \"none\";\r\n                    this.setState({m2:true})\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    err2 = ()=>{\r\n        let pas1 = document.getElementsByClassName(\"pas1\")[0].value;\r\n        let rule2 = /^[a-zA-Z\\d!@#$%^&*]{8,20}$/;\r\n        if(rule2.test(pas1)==false){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"block\";\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n            this.setState({m3:false})\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n            this.setState({m3:true})\r\n        }\r\n    }\r\n    err3 = ()=>{\r\n        let pas1 = document.getElementsByClassName(\"pas1\")[0].value;\r\n        let pas2 = document.getElementsByClassName(\"pas2\")[0].value;\r\n        if(pas1 !== pas2){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"block\";\r\n            this.setState({m4:false})\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n            this.setState({m4:true})\r\n            \r\n        }\r\n    }\r\n\r\n\r\n    //跳转到登录页面\r\n    gotosign=()=>{\r\n        this.props.history.push('/sign');\r\n    }\r\n\r\n    // async componentDidMount(){\r\n    //     const {data} = await http.post('/login/index',{})\r\n    // }\r\n\r\n    render(){\r\n        return(\r\n                <div id=\"login-box\">\r\n                    <h2>用户注册</h2>\r\n                    <ul>\r\n                        <li>\r\n                            <input className=\"phone\" onBlur={this.err1} type=\"text\" placeholder=\"输入手机号码\"/ >\r\n                            {/* <!-- 隐藏边框：style border：none --> */}\r\n                        </li>\r\n                        <li>\r\n                            <input className=\"pas1\" onBlur={this.err2} type=\"password\" placeholder=\"密码：8～20字符，需同时包含英文和数字\"/>\r\n                        </li>\r\n                        <li>\r\n                            <input className=\"pas2\" onBlur={this.err3} type=\"password\" placeholder=\"确认密码\"/>\r\n                        </li>\r\n\r\n                        {/* <li>\r\n                            <input className=\"\" type=\"text\" placeholder=\"请选择生日\"/>\r\n                        </li> */}\r\n\r\n                        <List className=\"date-picker-list\" style={{ backgroundColor: 'white' }}>\r\n                            <DatePicker\r\n                            value={this.state.date}\r\n                            onChange={date => this.setState({ date })}\r\n                            >\r\n                            </DatePicker>\r\n                            <DatePicker\r\n                            mode=\"date\"\r\n                            title=\"请选择生日\"\r\n                            extra=\"Optional\"\r\n                            value={this.state.date}\r\n                            onChange={date => this.setState({ date })}\r\n                            minDate={new Date(1930, 1, 1, 23, 59, 59)}\r\n                            >\r\n                            <List.Item arrow=\"horizontal\" >请选择生日</List.Item>\r\n                            </DatePicker>\r\n                            </List>\r\n\r\n                        <div className=\"erroBox\">\r\n                            <p className=\"repeat\"><i></i>&nbsp; 该账号已被注册 </p>\r\n                            <p className=\"errmsg-pho\"><i></i> &nbsp; 请输入正确的手机号码</p>\r\n                            <p className=\"errmsg-pas1\"><i></i> &nbsp; 密码：8～20字符，需同时包含英文和数字</p>\r\n                            <p className=\"errmsg-pas2\"><i></i> &nbsp; 两次密码不一致</p>\r\n                        </div>\r\n                        <li>\r\n                            <button onClick={this.login}>注册</button>\r\n                        </li>\r\n                        <div className=\"gotosign\">\r\n                            <a onClick={this.gotosign}>去登录</a>\r\n                        </div>\r\n                    </ul>\r\n                </div>\r\n        )\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}