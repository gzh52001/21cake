{"ast":null,"code":"var _jsxFileName = \"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\src\\\\pages\\\\sign\\\\index.js\";\n//登录页面\nimport React, { Component } from 'react';\nimport './sign.css';\nimport './base.css';\nimport http from '../../utils/http';\nimport { withRouter } from 'react-router-dom';\n\nclass Sign extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.goto = path => {\n      this.props.history.push(path);\n    };\n\n    this.serr1 = () => {\n      let spho = document.getElementsByClassName(\"spho\")[0].value;\n      let rule1 = /^[1][3,4,5,7,8][0-9]{9}$/;\n\n      if (rule1.test(spho) == false) {\n        document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"block\";\n        document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\n      } else {\n        document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\n      }\n    };\n\n    this.serr2 = () => {\n      let spsw = document.getElementsByClassName(\"spsw\")[0].value;\n      let rule1 = /^[a-zA-Z\\d!@#$%^&*]{8,20}$/;\n\n      if (rule1.test(spsw) == false) {\n        document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\n        document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"block\";\n      } else {\n        document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\n      }\n    };\n\n    this.enter = event => {\n      if (event.keyCode == 13) {\n        this.sign();\n      }\n    };\n\n    this.sign = () => {\n      let spho = document.getElementsByClassName(\"spho\")[0].value;\n      let spsw = document.getElementsByClassName(\"spsw\")[0].value;\n      console.log(spho, spsw);\n      let props = this.props;\n      http.get('/user/login', {\n        username: spho,\n        psw: spsw\n      }).then(res => {\n        console.log(res);\n\n        if (res.flag == true) {\n          localStorage.setItem('phone', spho);\n          localStorage.setItem('psw', spsw);\n          localStorage.setItem('token', res.data.token);\n          setTimeout(alert(\"登录成功\"), 1000);\n          this.props.history.push('/person');\n        } else {\n          alert(\"登录失败，用户名或密码错误\");\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    console.log(this.props);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"sign-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, \"\\u624B\\u673A\\u53F7\\u7801\\u767B\\u5F55\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"spho\",\n      onBlur: this.serr1,\n      type: \"text\",\n      placeholder: \"\\u624B\\u673A\\u53F7\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 26\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"spsw\",\n      onBlur: this.serr2,\n      onKeyDown: this.enter,\n      type: \"password\",\n      placeholder: \"\\u586B\\u5199\\u5BC6\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"erroBox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"errmsg-pho\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 55\n      }\n    }), \" \\xA0 \\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u624B\\u673A\\u53F7\\u7801\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"errmsg-pas1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 56\n      }\n    }), \" \\xA0 \\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u5BC6\\u7801\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.sign,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, \"\\u767B\\u5F55\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"gotoLogin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onClick: this.goto.bind(null, '/login'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, \"\\u53BB\\u6CE8\\u518C\"))));\n  }\n\n}\n\nSign = withRouter(Sign);\nexport default Sign;","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/src/pages/sign/index.js"],"names":["React","Component","http","withRouter","Sign","goto","path","props","history","push","serr1","spho","document","getElementsByClassName","value","rule1","test","style","display","serr2","spsw","enter","event","keyCode","sign","console","log","get","username","psw","then","res","flag","localStorage","setItem","data","token","setTimeout","alert","componentDidMount","render","bind"],"mappings":"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","sourcesContent":["//登录页面\r\nimport React, { Component } from 'react';\r\nimport './sign.css';\r\nimport './base.css';\r\nimport http from '../../utils/http';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nclass Sign extends Component{\r\n\r\n    componentDidMount(){\r\n        console.log(this.props);\r\n    }\r\n\r\n    goto = (path)=>{\r\n        this.props.history.push(path);\r\n    }\r\n\r\n\r\n    //两个正则提示的判断函数\r\n    serr1 = ()=>{\r\n        let spho = document.getElementsByClassName(\"spho\")[0].value;\r\n        let rule1 = /^[1][3,4,5,7,8][0-9]{9}$/;\r\n        if(rule1.test(spho)==false){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"block\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    serr2 = ()=>{\r\n        let spsw = document.getElementsByClassName(\"spsw\")[0].value;\r\n        let rule1 = /^[a-zA-Z\\d!@#$%^&*]{8,20}$/;\r\n        if(rule1.test(spsw)==false){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"block\";\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    //在密码栏按下回车按钮事件\r\n    enter=(event)=>{\r\n        if(event.keyCode ==13){\r\n            this.sign()\r\n        }\r\n    }\r\n\r\n    //点击登录按钮事件\r\n    sign=()=>{\r\n        let spho = document.getElementsByClassName(\"spho\")[0].value;\r\n        let spsw = document.getElementsByClassName(\"spsw\")[0].value;\r\n        \r\n        console.log(spho,spsw);\r\n        \r\n        let props=this.props;\r\n        http.get('/user/login',{username:spho,psw:spsw}).then((res)=>{\r\n            console.log(res);\r\n            if(res.flag ==true){\r\n                \r\n                localStorage.setItem('phone',spho);\r\n                localStorage.setItem('psw',spsw);\r\n                localStorage.setItem('token',res.data.token);\r\n                setTimeout( alert(\"登录成功\"), 1000);\r\n                this.props.history.push('/person');\r\n                \r\n            }else{\r\n                alert(\"登录失败，用户名或密码错误\");\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div id=\"sign-box\">\r\n                <h2>手机号码登录</h2>\r\n                <ul>\r\n                    <li>\r\n                         <input className=\"spho\" onBlur={this.serr1} type=\"text\" placeholder=\"手机号码\"/>\r\n                        {/* <!-- 隐藏边框：style border：none --> */}\r\n                    </li>\r\n                    <li>\r\n                        <input className=\"spsw\" onBlur={this.serr2} onKeyDown={this.enter} type=\"password\" placeholder=\"填写密码\"/>\r\n                    </li>\r\n                    <div className=\"erroBox\">\r\n                            <p className=\"errmsg-pho\"><i></i> &nbsp; 请输入正确手机号码</p>\r\n                            <p className=\"errmsg-pas1\"><i></i> &nbsp; 请输入正确密码</p>\r\n                        </div>\r\n                    <li>\r\n                        <button onClick={this.sign}>登录</button>\r\n                    </li>\r\n                    <div className=\"gotoLogin\">\r\n                        <a  onClick = {this.goto.bind(null,'/login')}>去注册</a>\r\n                    </div>\r\n                </ul>\r\n            </div>  \r\n        )\r\n    }\r\n\r\n}\r\n\r\nSign = withRouter(Sign);\r\nexport default Sign;"]},"metadata":{},"sourceType":"module"}