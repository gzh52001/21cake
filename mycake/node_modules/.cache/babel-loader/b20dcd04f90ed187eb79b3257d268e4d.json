{"ast":null,"code":"import _classCallCheck from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";//注册页面\nimport React,{Component}from'react';import'antd-mobile/dist/antd-mobile.css';import'./login.css';import'./base.css';import http from'../../utils/http';import{DatePicker,List}from'antd-mobile';var nowTimeStamp=Date.now();var now=new Date(nowTimeStamp);// GMT is not currently observed in the UK. So use UTC now.\nvar utcNow=new Date(now.getTime()+now.getTimezoneOffset()*60000);// Make sure that in `time` mode, the maxDate and minDate are within one day.\nvar minDate=new Date(nowTimeStamp-1e7);var maxDate=new Date(nowTimeStamp+1e7);// console.log(minDate, maxDate);\nif(minDate.getDate()!==maxDate.getDate()){// set the minDate to the 0 of maxDate\nminDate=new Date(maxDate.getFullYear(),maxDate.getMonth(),maxDate.getDate());}function formatDate(date){/* eslint no-confusing-arrow: 0 */var pad=function pad(n){return n<10?\"0\".concat(n):n;};var dateStr=\"\".concat(date.getFullYear(),\"-\").concat(pad(date.getMonth()+1),\"-\").concat(pad(date.getDate()));var timeStr=\"\".concat(pad(date.getHours()),\":\").concat(pad(date.getMinutes()));return\"\".concat(dateStr,\" \").concat(timeStr);}// If not using `List.Item` as children\n// The `onClick / extra` props need to be processed within the component\nvar CustomChildren=function CustomChildren(_ref){var extra=_ref.extra,onClick=_ref.onClick,children=_ref.children;return/*#__PURE__*/React.createElement(\"div\",{onClick:onClick,style:{backgroundColor:'#fff',height:'45px',lineHeight:'45px',padding:'0 15px'}},children,/*#__PURE__*/React.createElement(\"span\",{style:{float:'right',color:'#888'}},extra));};var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={date:now,time:now,utcDate:utcNow,dpValue:null,customChildValue:null,visible:false};_this.login=function(){var phone=document.getElementsByClassName(\"phone\")[0].value;var psw=document.getElementsByClassName(\"pas2\")[0].value;var birthday=document.getElementsByClassName(\"am-list-extra\")[0].innerHTML;console.log(phone,psw,birthday);//判断四个报错信息是否出现\nvar m1234=_this.state.m1&&_this.state.m2&&_this.state.m3&&_this.state.m4;if(phone&&psw&&m1234){//填写了账号密码，且无报错信息才可注册\nhttp.post('/user/reg',{username:phone,psw:psw,birthday:birthday}).then(function(res){console.log(res);if(res.flag==true){setTimeout(alert(\"注册成功\"),1000);_this.props.history.push('/sign');}});}};_this.err1=function(){var phone=document.getElementsByClassName(\"phone\")[0].value;// 正则验证手机号码\nvar rule1=/^[1][3,4,5,7,8][0-9]{9}$/;if(rule1.test(phone)==false){document.getElementsByClassName(\"errmsg-pho\")[0].style.display=\"block\";document.getElementsByClassName(\"errmsg-pas1\")[0].style.display=\"none\";document.getElementsByClassName(\"errmsg-pas2\")[0].style.display=\"none\";document.getElementsByClassName(\"repeat\")[0].style.display=\"none\";_this.setState({m1:false});}else{document.getElementsByClassName(\"errmsg-pho\")[0].style.display=\"none\";_this.setState({m1:true});//this.state.m1 = true\n}//验证账号是否已被注册\nif(phone){//验证账号是否为空\nhttp.get('/user/checkname',{username:phone}).then(function(res){console.log(res.flag);//向后台验证账号\nif(res.flag==false){document.getElementsByClassName(\"repeat\")[0].style.display=\"block\";document.getElementsByClassName(\"errmsg-pho\")[0].style.display=\"none\";document.getElementsByClassName(\"errmsg-pas1\")[0].style.display=\"none\";document.getElementsByClassName(\"errmsg-pas2\")[0].style.display=\"none\";_this.setState({m2:false});}else{document.getElementsByClassName(\"repeat\")[0].style.display=\"none\";_this.setState({m2:true});}});}};_this.err2=function(){var pas1=document.getElementsByClassName(\"pas1\")[0].value;var rule2=/^[a-zA-Z\\d!@#$%^&*]{8,20}$/;if(rule2.test(pas1)==false){document.getElementsByClassName(\"errmsg-pho\")[0].style.display=\"none\";document.getElementsByClassName(\"errmsg-pas1\")[0].style.display=\"block\";document.getElementsByClassName(\"errmsg-pas2\")[0].style.display=\"none\";_this.setState({m3:false});}else{document.getElementsByClassName(\"errmsg-pas1\")[0].style.display=\"none\";_this.setState({m3:true});}};_this.err3=function(){var pas1=document.getElementsByClassName(\"pas1\")[0].value;var pas2=document.getElementsByClassName(\"pas2\")[0].value;if(pas1!==pas2){document.getElementsByClassName(\"errmsg-pho\")[0].style.display=\"none\";document.getElementsByClassName(\"errmsg-pas1\")[0].style.display=\"none\";document.getElementsByClassName(\"errmsg-pas2\")[0].style.display=\"block\";_this.setState({m4:false});}else{document.getElementsByClassName(\"errmsg-pas2\")[0].style.display=\"none\";_this.setState({m4:true});}};_this.gotosign=function(){_this.props.history.push('/sign');};return _this;}_createClass(Login,[{key:\"render\",// async componentDidMount(){\n//     const {data} = await http.post('/login/index',{})\n// }\nvalue:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{id:\"login-box\"},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u7528\\u6237\\u6CE8\\u518C\"),/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"phone\",onBlur:this.err1,type:\"text\",placeholder:\"\\u8F93\\u5165\\u624B\\u673A\\u53F7\\u7801\"})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"pas1\",onBlur:this.err2,type:\"password\",placeholder:\"\\u5BC6\\u7801\\uFF1A8\\uFF5E20\\u5B57\\u7B26\\uFF0C\\u9700\\u540C\\u65F6\\u5305\\u542B\\u82F1\\u6587\\u548C\\u6570\\u5B57\"})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"pas2\",onBlur:this.err3,type:\"password\",placeholder:\"\\u786E\\u8BA4\\u5BC6\\u7801\"})),/*#__PURE__*/React.createElement(List,{className:\"date-picker-list\",style:{backgroundColor:'white'}},/*#__PURE__*/React.createElement(DatePicker,{value:this.state.date,onChange:function onChange(date){return _this2.setState({date:date});}}),/*#__PURE__*/React.createElement(DatePicker,{mode:\"date\",title:\"\\u8BF7\\u9009\\u62E9\\u751F\\u65E5\",extra:\"Optional\",value:this.state.date,onChange:function onChange(date){return _this2.setState({date:date});},minDate:new Date(1930,1,1,23,59,59)},/*#__PURE__*/React.createElement(List.Item,{arrow:\"horizontal\"},\"\\u8BF7\\u9009\\u62E9\\u751F\\u65E5\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"erroBox\"},/*#__PURE__*/React.createElement(\"p\",{className:\"repeat\"},/*#__PURE__*/React.createElement(\"i\",null),\"\\xA0 \\u8BE5\\u8D26\\u53F7\\u5DF2\\u88AB\\u6CE8\\u518C \"),/*#__PURE__*/React.createElement(\"p\",{className:\"errmsg-pho\"},/*#__PURE__*/React.createElement(\"i\",null),\" \\xA0 \\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u7684\\u624B\\u673A\\u53F7\\u7801\"),/*#__PURE__*/React.createElement(\"p\",{className:\"errmsg-pas1\"},/*#__PURE__*/React.createElement(\"i\",null),\" \\xA0 \\u5BC6\\u7801\\uFF1A8\\uFF5E20\\u5B57\\u7B26\\uFF0C\\u9700\\u540C\\u65F6\\u5305\\u542B\\u82F1\\u6587\\u548C\\u6570\\u5B57\"),/*#__PURE__*/React.createElement(\"p\",{className:\"errmsg-pas2\"},/*#__PURE__*/React.createElement(\"i\",null),\" \\xA0 \\u4E24\\u6B21\\u5BC6\\u7801\\u4E0D\\u4E00\\u81F4\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:this.login},\"\\u6CE8\\u518C\")),/*#__PURE__*/React.createElement(\"div\",{className:\"gotosign\"},/*#__PURE__*/React.createElement(\"a\",{onClick:this.gotosign},\"\\u53BB\\u767B\\u5F55\"))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/src/pages/login/index.js"],"names":["React","Component","http","DatePicker","List","nowTimeStamp","Date","now","utcNow","getTime","getTimezoneOffset","minDate","maxDate","getDate","getFullYear","getMonth","formatDate","date","pad","n","dateStr","timeStr","getHours","getMinutes","CustomChildren","extra","onClick","children","backgroundColor","height","lineHeight","padding","float","color","Login","state","time","utcDate","dpValue","customChildValue","visible","login","phone","document","getElementsByClassName","value","psw","birthday","innerHTML","console","log","m1234","m1","m2","m3","m4","post","username","then","res","flag","setTimeout","alert","props","history","push","err1","rule1","test","style","display","setState","get","err2","pas1","rule2","err3","pas2","gotosign"],"mappings":"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","sourcesContent":["//注册页面\r\nimport React, { Component } from 'react';\r\nimport 'antd-mobile/dist/antd-mobile.css';\r\nimport './login.css';\r\nimport './base.css';\r\nimport http from '../../utils/http';\r\n\r\nimport { DatePicker, List } from 'antd-mobile';\r\n\r\nconst nowTimeStamp = Date.now();\r\nconst now = new Date(nowTimeStamp);\r\n// GMT is not currently observed in the UK. So use UTC now.\r\nconst utcNow = new Date(now.getTime() + (now.getTimezoneOffset() * 60000));\r\n\r\n// Make sure that in `time` mode, the maxDate and minDate are within one day.\r\nlet minDate = new Date(nowTimeStamp - 1e7);\r\nconst maxDate = new Date(nowTimeStamp + 1e7);\r\n// console.log(minDate, maxDate);\r\nif (minDate.getDate() !== maxDate.getDate()) {\r\n  // set the minDate to the 0 of maxDate\r\n  minDate = new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate());\r\n}\r\n\r\nfunction formatDate(date) {\r\n  /* eslint no-confusing-arrow: 0 */\r\n  const pad = n => n < 10 ? `0${n}` : n;\r\n  const dateStr = `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}`;\r\n  const timeStr = `${pad(date.getHours())}:${pad(date.getMinutes())}`;\r\n  return `${dateStr} ${timeStr}`;\r\n}\r\n\r\n// If not using `List.Item` as children\r\n// The `onClick / extra` props need to be processed within the component\r\nconst CustomChildren = ({ extra, onClick, children }) => (\r\n  <div\r\n    onClick={onClick}\r\n    style={{ backgroundColor: '#fff', height: '45px', lineHeight: '45px', padding: '0 15px' }}\r\n  >\r\n    {children}\r\n    <span style={{ float: 'right', color: '#888' }}>{extra}</span>\r\n  </div>\r\n);\r\n\r\nclass Login extends Component{\r\n\r\n    state = {\r\n        date: now,\r\n        time: now,\r\n        utcDate: utcNow,\r\n        dpValue: null,\r\n        customChildValue: null,\r\n        visible: false,\r\n      }\r\n\r\n    \r\n\r\n    \r\n    //注册按钮的点击事件\r\n    login =()=>{\r\n        let phone= document.getElementsByClassName(\"phone\")[0].value;\r\n        let psw= document.getElementsByClassName(\"pas2\")[0].value;\r\n        let birthday = document.getElementsByClassName(\"am-list-extra\")[0].innerHTML;\r\n    \r\n        console.log(phone,psw,birthday);\r\n        \r\n        //判断四个报错信息是否出现\r\n        let m1234 = this.state.m1&&this.state.m2&&this.state.m3&&this.state.m4;\r\n\r\n        if(phone&&psw&&m1234){//填写了账号密码，且无报错信息才可注册\r\n            http.post('/user/reg',{username:phone,psw:psw,birthday:birthday}).then((res)=>{\r\n                console.log(res);\r\n                if(res.flag == true){\r\n                    \r\n                    setTimeout( alert(\"注册成功\"), 1000);\r\n                    \r\n                    this.props.history.push('/sign');\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    //三个err函数用于正则提示信息的显示隐藏\r\n    err1 = ()=>{\r\n        let phone = document.getElementsByClassName(\"phone\")[0].value;\r\n        // 正则验证手机号码\r\n        let rule1 = /^[1][3,4,5,7,8][0-9]{9}$/;\r\n        if(rule1.test(phone)==false){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"block\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"repeat\")[0].style.display = \"none\";\r\n            this.setState({m1:false});\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n            this.setState({m1:true});\r\n\r\n            //this.state.m1 = true\r\n        }\r\n\r\n        //验证账号是否已被注册\r\n        if(phone){//验证账号是否为空\r\n            http.get('/user/checkname',{username:phone}).then((res)=>{\r\n                console.log(res.flag);\r\n                //向后台验证账号\r\n                if(res.flag == false){\r\n                    document.getElementsByClassName(\"repeat\")[0].style.display = \"block\";\r\n                    document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n                    document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n                    document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n                    this.setState({m2:false})\r\n                }else{\r\n                    document.getElementsByClassName(\"repeat\")[0].style.display = \"none\";\r\n                    this.setState({m2:true})\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    err2 = ()=>{\r\n        let pas1 = document.getElementsByClassName(\"pas1\")[0].value;\r\n        let rule2 = /^[a-zA-Z\\d!@#$%^&*]{8,20}$/;\r\n        if(rule2.test(pas1)==false){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"block\";\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n            this.setState({m3:false})\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n            this.setState({m3:true})\r\n        }\r\n    }\r\n    err3 = ()=>{\r\n        let pas1 = document.getElementsByClassName(\"pas1\")[0].value;\r\n        let pas2 = document.getElementsByClassName(\"pas2\")[0].value;\r\n        if(pas1 !== pas2){\r\n            document.getElementsByClassName(\"errmsg-pho\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas1\")[0].style.display = \"none\";\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"block\";\r\n            this.setState({m4:false})\r\n        }else{\r\n            document.getElementsByClassName(\"errmsg-pas2\")[0].style.display = \"none\";\r\n            this.setState({m4:true})\r\n            \r\n        }\r\n    }\r\n\r\n\r\n    //跳转到登录页面\r\n    gotosign=()=>{\r\n        this.props.history.push('/sign');\r\n    }\r\n\r\n    // async componentDidMount(){\r\n    //     const {data} = await http.post('/login/index',{})\r\n    // }\r\n\r\n    render(){\r\n        return(\r\n                <div id=\"login-box\">\r\n                    <h2>用户注册</h2>\r\n                    <ul>\r\n                        <li>\r\n                            <input className=\"phone\" onBlur={this.err1} type=\"text\" placeholder=\"输入手机号码\"/ >\r\n                            {/* <!-- 隐藏边框：style border：none --> */}\r\n                        </li>\r\n                        <li>\r\n                            <input className=\"pas1\" onBlur={this.err2} type=\"password\" placeholder=\"密码：8～20字符，需同时包含英文和数字\"/>\r\n                        </li>\r\n                        <li>\r\n                            <input className=\"pas2\" onBlur={this.err3} type=\"password\" placeholder=\"确认密码\"/>\r\n                        </li>\r\n\r\n                        {/* <li>\r\n                            <input className=\"\" type=\"text\" placeholder=\"请选择生日\"/>\r\n                        </li> */}\r\n\r\n                        <List className=\"date-picker-list\" style={{ backgroundColor: 'white' }}>\r\n                            <DatePicker\r\n                            value={this.state.date}\r\n                            onChange={date => this.setState({ date })}\r\n                            >\r\n                            </DatePicker>\r\n                            <DatePicker\r\n                            mode=\"date\"\r\n                            title=\"请选择生日\"\r\n                            extra=\"Optional\"\r\n                            value={this.state.date}\r\n                            onChange={date => this.setState({ date })}\r\n                            minDate={new Date(1930, 1, 1, 23, 59, 59)}\r\n                            >\r\n                            <List.Item arrow=\"horizontal\" >请选择生日</List.Item>\r\n                            </DatePicker>\r\n                            </List>\r\n\r\n                        <div className=\"erroBox\">\r\n                            <p className=\"repeat\"><i></i>&nbsp; 该账号已被注册 </p>\r\n                            <p className=\"errmsg-pho\"><i></i> &nbsp; 请输入正确的手机号码</p>\r\n                            <p className=\"errmsg-pas1\"><i></i> &nbsp; 密码：8～20字符，需同时包含英文和数字</p>\r\n                            <p className=\"errmsg-pas2\"><i></i> &nbsp; 两次密码不一致</p>\r\n                        </div>\r\n                        <li>\r\n                            <button onClick={this.login}>注册</button>\r\n                        </li>\r\n                        <div className=\"gotosign\">\r\n                            <a onClick={this.gotosign}>去登录</a>\r\n                        </div>\r\n                    </ul>\r\n                </div>\r\n        )\r\n    }\r\n\r\n\r\n    \r\n\r\n\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}