{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\n/* tslint:disable:jsx-no-multiline-js */\n\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Dialog from 'rmc-dialog';\nimport TouchFeedback from 'rmc-feedback';\nimport getDataAttr from '../_util/getDataAttr';\nimport Badge from '../badge';\nvar NORMAL = 'NORMAL';\nvar SHARE = 'SHARE'; // tslint:disable-next-line:no-empty\n\nfunction noop() {}\n\nvar queue = [];\n\nfunction createActionSheet(flag, config, callback) {\n  var props = _extends({\n    prefixCls: 'am-action-sheet',\n    cancelButtonText: '取消'\n  }, config);\n\n  var prefixCls = props.prefixCls,\n      className = props.className,\n      transitionName = props.transitionName,\n      maskTransitionName = props.maskTransitionName,\n      _props$maskClosable = props.maskClosable,\n      maskClosable = _props$maskClosable === undefined ? true : _props$maskClosable;\n  var div = document.createElement('div');\n  document.body.appendChild(div);\n  queue.push(close);\n\n  function close() {\n    if (div) {\n      ReactDOM.unmountComponentAtNode(div);\n\n      if (div.parentNode) {\n        div.parentNode.removeChild(div);\n      }\n\n      var index = queue.indexOf(close);\n\n      if (index !== -1) {\n        queue.splice(index, 1);\n      }\n    }\n  }\n\n  function cb(index) {\n    var rowIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var res = callback(index, rowIndex);\n\n    if (res && res.then) {\n      res.then(function () {\n        close();\n      });\n    } else {\n      close();\n    }\n  }\n\n  var title = props.title,\n      message = props.message,\n      options = props.options,\n      destructiveButtonIndex = props.destructiveButtonIndex,\n      cancelButtonIndex = props.cancelButtonIndex,\n      cancelButtonText = props.cancelButtonText,\n      _props$badges = props.badges,\n      badges = _props$badges === undefined ? [] : _props$badges;\n  var titleMsg = [title ? React.createElement('h3', {\n    key: '0',\n    className: prefixCls + '-title'\n  }, title) : null, message ? React.createElement('div', {\n    key: '1',\n    className: prefixCls + '-message'\n  }, message) : null];\n  var children = null;\n  var mode = 'normal';\n\n  switch (flag) {\n    case NORMAL:\n      mode = 'normal';\n      var normalOptions = options;\n      var badgesMap = {};\n\n      if (badges && badges.length > 0) {\n        badges.forEach(function (element) {\n          if (element.index >= 0) {\n            badgesMap[element.index] = React.createElement(Badge, element);\n          }\n        });\n      }\n\n      children = React.createElement('div', getDataAttr(props), titleMsg, React.createElement('div', {\n        className: prefixCls + '-button-list',\n        role: 'group'\n      }, normalOptions.map(function (item, index) {\n        var _classnames;\n\n        var itemProps = {\n          className: classnames(prefixCls + '-button-list-item', (_classnames = {}, _defineProperty(_classnames, prefixCls + '-destructive-button', destructiveButtonIndex === index), _defineProperty(_classnames, prefixCls + '-cancel-button', cancelButtonIndex === index), _classnames)),\n          onClick: function onClick() {\n            return cb(index);\n          },\n          role: 'button'\n        };\n        var bContent = React.createElement('div', itemProps, item); // 仅在设置徽标的情况下修改dom结构\n\n        if (badgesMap[index]) {\n          bContent = React.createElement('div', _extends({}, itemProps, {\n            className: itemProps.className + ' ' + prefixCls + '-button-list-badge'\n          }), React.createElement('span', {\n            className: prefixCls + '-button-list-item-content'\n          }, item), badgesMap[index]);\n        }\n\n        var bItem = React.createElement(TouchFeedback, {\n          key: index,\n          activeClassName: prefixCls + '-button-list-item-active'\n        }, bContent);\n\n        if (cancelButtonIndex === index || destructiveButtonIndex === index) {\n          bItem = React.createElement(TouchFeedback, {\n            key: index,\n            activeClassName: prefixCls + '-button-list-item-active'\n          }, React.createElement('div', itemProps, item, cancelButtonIndex === index ? React.createElement('span', {\n            className: prefixCls + '-cancel-button-mask'\n          }) : null));\n        }\n\n        return bItem;\n      })));\n      break;\n\n    case SHARE:\n      mode = 'share';\n      var multipleLine = options.length && Array.isArray(options[0]) || false;\n\n      var createList = function createList(item, index) {\n        var rowIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        return React.createElement('div', {\n          className: prefixCls + '-share-list-item',\n          role: 'button',\n          key: index,\n          onClick: function onClick() {\n            return cb(index, rowIndex);\n          }\n        }, React.createElement('div', {\n          className: prefixCls + '-share-list-item-icon'\n        }, item.icon), React.createElement('div', {\n          className: prefixCls + '-share-list-item-title'\n        }, item.title));\n      };\n\n      children = React.createElement('div', getDataAttr(props), titleMsg, React.createElement('div', {\n        className: prefixCls + '-share'\n      }, multipleLine ? options.map(function (item, index) {\n        return React.createElement('div', {\n          key: index,\n          className: prefixCls + '-share-list'\n        }, item.map(function (ii, ind) {\n          return createList(ii, ind, index);\n        }));\n      }) : React.createElement('div', {\n        className: prefixCls + '-share-list'\n      }, options.map(function (item, index) {\n        return createList(item, index);\n      })), React.createElement(TouchFeedback, {\n        activeClassName: prefixCls + '-share-cancel-button-active'\n      }, React.createElement('div', {\n        className: prefixCls + '-share-cancel-button',\n        role: 'button',\n        onClick: function onClick() {\n          return cb(-1);\n        }\n      }, cancelButtonText))));\n      break;\n\n    default:\n      break;\n  }\n\n  var rootCls = classnames(prefixCls + '-' + mode, className);\n  ReactDOM.render(React.createElement(Dialog, {\n    visible: true,\n    title: '',\n    footer: '',\n    prefixCls: prefixCls,\n    className: rootCls,\n    transitionName: transitionName || 'am-slide-up',\n    maskTransitionName: maskTransitionName || 'am-fade',\n    onClose: function onClose() {\n      return cb(cancelButtonIndex || -1);\n    },\n    maskClosable: maskClosable,\n    wrapProps: props.wrapProps || {}\n  }, children), div);\n  return {\n    close: close\n  };\n}\n\nexport default {\n  showActionSheetWithOptions: function showActionSheetWithOptions(config) {\n    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    createActionSheet(NORMAL, config, callback);\n  },\n  showShareActionSheetWithOptions: function showShareActionSheetWithOptions(config) {\n    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    createActionSheet(SHARE, config, callback);\n  },\n  close: function close() {\n    queue.forEach(function (q) {\n      return q();\n    });\n  }\n};","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/node_modules/antd-mobile/es/action-sheet/index.js"],"names":["_defineProperty","_extends","classnames","React","ReactDOM","Dialog","TouchFeedback","getDataAttr","Badge","NORMAL","SHARE","noop","queue","createActionSheet","flag","config","callback","props","prefixCls","cancelButtonText","className","transitionName","maskTransitionName","_props$maskClosable","maskClosable","undefined","div","document","createElement","body","appendChild","push","close","unmountComponentAtNode","parentNode","removeChild","index","indexOf","splice","cb","rowIndex","arguments","length","res","then","title","message","options","destructiveButtonIndex","cancelButtonIndex","_props$badges","badges","titleMsg","key","children","mode","normalOptions","badgesMap","forEach","element","role","map","item","_classnames","itemProps","onClick","bContent","bItem","activeClassName","multipleLine","Array","isArray","createList","icon","ii","ind","rootCls","render","visible","footer","onClose","wrapProps","showActionSheetWithOptions","showShareActionSheetWithOptions","q"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\n/* tslint:disable:jsx-no-multiline-js */\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Dialog from 'rmc-dialog';\nimport TouchFeedback from 'rmc-feedback';\nimport getDataAttr from '../_util/getDataAttr';\nimport Badge from '../badge';\nvar NORMAL = 'NORMAL';\nvar SHARE = 'SHARE';\n// tslint:disable-next-line:no-empty\nfunction noop() {}\nvar queue = [];\nfunction createActionSheet(flag, config, callback) {\n    var props = _extends({ prefixCls: 'am-action-sheet', cancelButtonText: '取消' }, config);\n    var prefixCls = props.prefixCls,\n        className = props.className,\n        transitionName = props.transitionName,\n        maskTransitionName = props.maskTransitionName,\n        _props$maskClosable = props.maskClosable,\n        maskClosable = _props$maskClosable === undefined ? true : _props$maskClosable;\n\n    var div = document.createElement('div');\n    document.body.appendChild(div);\n    queue.push(close);\n    function close() {\n        if (div) {\n            ReactDOM.unmountComponentAtNode(div);\n            if (div.parentNode) {\n                div.parentNode.removeChild(div);\n            }\n            var index = queue.indexOf(close);\n            if (index !== -1) {\n                queue.splice(index, 1);\n            }\n        }\n    }\n    function cb(index) {\n        var rowIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n        var res = callback(index, rowIndex);\n        if (res && res.then) {\n            res.then(function () {\n                close();\n            });\n        } else {\n            close();\n        }\n    }\n    var title = props.title,\n        message = props.message,\n        options = props.options,\n        destructiveButtonIndex = props.destructiveButtonIndex,\n        cancelButtonIndex = props.cancelButtonIndex,\n        cancelButtonText = props.cancelButtonText,\n        _props$badges = props.badges,\n        badges = _props$badges === undefined ? [] : _props$badges;\n\n    var titleMsg = [title ? React.createElement(\n        'h3',\n        { key: '0', className: prefixCls + '-title' },\n        title\n    ) : null, message ? React.createElement(\n        'div',\n        { key: '1', className: prefixCls + '-message' },\n        message\n    ) : null];\n    var children = null;\n    var mode = 'normal';\n    switch (flag) {\n        case NORMAL:\n            mode = 'normal';\n            var normalOptions = options;\n            var badgesMap = {};\n            if (badges && badges.length > 0) {\n                badges.forEach(function (element) {\n                    if (element.index >= 0) {\n                        badgesMap[element.index] = React.createElement(Badge, element);\n                    }\n                });\n            }\n            children = React.createElement(\n                'div',\n                getDataAttr(props),\n                titleMsg,\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-button-list', role: 'group' },\n                    normalOptions.map(function (item, index) {\n                        var _classnames;\n\n                        var itemProps = {\n                            className: classnames(prefixCls + '-button-list-item', (_classnames = {}, _defineProperty(_classnames, prefixCls + '-destructive-button', destructiveButtonIndex === index), _defineProperty(_classnames, prefixCls + '-cancel-button', cancelButtonIndex === index), _classnames)),\n                            onClick: function onClick() {\n                                return cb(index);\n                            },\n                            role: 'button'\n                        };\n                        var bContent = React.createElement(\n                            'div',\n                            itemProps,\n                            item\n                        );\n                        // 仅在设置徽标的情况下修改dom结构\n                        if (badgesMap[index]) {\n                            bContent = React.createElement(\n                                'div',\n                                _extends({}, itemProps, { className: itemProps.className + ' ' + prefixCls + '-button-list-badge' }),\n                                React.createElement(\n                                    'span',\n                                    { className: prefixCls + '-button-list-item-content' },\n                                    item\n                                ),\n                                badgesMap[index]\n                            );\n                        }\n                        var bItem = React.createElement(\n                            TouchFeedback,\n                            { key: index, activeClassName: prefixCls + '-button-list-item-active' },\n                            bContent\n                        );\n                        if (cancelButtonIndex === index || destructiveButtonIndex === index) {\n                            bItem = React.createElement(\n                                TouchFeedback,\n                                { key: index, activeClassName: prefixCls + '-button-list-item-active' },\n                                React.createElement(\n                                    'div',\n                                    itemProps,\n                                    item,\n                                    cancelButtonIndex === index ? React.createElement('span', { className: prefixCls + '-cancel-button-mask' }) : null\n                                )\n                            );\n                        }\n                        return bItem;\n                    })\n                )\n            );\n            break;\n        case SHARE:\n            mode = 'share';\n            var multipleLine = options.length && Array.isArray(options[0]) || false;\n            var createList = function createList(item, index) {\n                var rowIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n                return React.createElement(\n                    'div',\n                    { className: prefixCls + '-share-list-item', role: 'button', key: index, onClick: function onClick() {\n                            return cb(index, rowIndex);\n                        } },\n                    React.createElement(\n                        'div',\n                        { className: prefixCls + '-share-list-item-icon' },\n                        item.icon\n                    ),\n                    React.createElement(\n                        'div',\n                        { className: prefixCls + '-share-list-item-title' },\n                        item.title\n                    )\n                );\n            };\n            children = React.createElement(\n                'div',\n                getDataAttr(props),\n                titleMsg,\n                React.createElement(\n                    'div',\n                    { className: prefixCls + '-share' },\n                    multipleLine ? options.map(function (item, index) {\n                        return React.createElement(\n                            'div',\n                            { key: index, className: prefixCls + '-share-list' },\n                            item.map(function (ii, ind) {\n                                return createList(ii, ind, index);\n                            })\n                        );\n                    }) : React.createElement(\n                        'div',\n                        { className: prefixCls + '-share-list' },\n                        options.map(function (item, index) {\n                            return createList(item, index);\n                        })\n                    ),\n                    React.createElement(\n                        TouchFeedback,\n                        { activeClassName: prefixCls + '-share-cancel-button-active' },\n                        React.createElement(\n                            'div',\n                            { className: prefixCls + '-share-cancel-button', role: 'button', onClick: function onClick() {\n                                    return cb(-1);\n                                } },\n                            cancelButtonText\n                        )\n                    )\n                )\n            );\n            break;\n        default:\n            break;\n    }\n    var rootCls = classnames(prefixCls + '-' + mode, className);\n    ReactDOM.render(React.createElement(\n        Dialog,\n        { visible: true, title: '', footer: '', prefixCls: prefixCls, className: rootCls, transitionName: transitionName || 'am-slide-up', maskTransitionName: maskTransitionName || 'am-fade', onClose: function onClose() {\n                return cb(cancelButtonIndex || -1);\n            }, maskClosable: maskClosable, wrapProps: props.wrapProps || {} },\n        children\n    ), div);\n    return {\n        close: close\n    };\n}\nexport default {\n    showActionSheetWithOptions: function showActionSheetWithOptions(config) {\n        var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n        createActionSheet(NORMAL, config, callback);\n    },\n    showShareActionSheetWithOptions: function showShareActionSheetWithOptions(config) {\n        var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n        createActionSheet(SHARE, config, callback);\n    },\n    close: function close() {\n        queue.forEach(function (q) {\n            return q();\n        });\n    }\n};"]},"metadata":{},"sourceType":"module"}