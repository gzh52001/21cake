{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/*\n * https://github.com/jasonslyvia/react-marquee\n * remove PC\n * support React Element for text prop\n*/\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar Marquee = function (_React$Component) {\n  _inherits(Marquee, _React$Component);\n\n  function Marquee() {\n    _classCallCheck(this, Marquee);\n\n    var _this = _possibleConstructorReturn(this, (Marquee.__proto__ || Object.getPrototypeOf(Marquee)).apply(this, arguments));\n\n    _this.state = {\n      animatedWidth: 0,\n      overflowWidth: 0\n    };\n    return _this;\n  }\n\n  _createClass(Marquee, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this._measureText();\n\n      this._startAnimation();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this._measureText();\n\n      if (!this._marqueeTimer) {\n        this._startAnimation();\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this._marqueeTimer);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          prefixCls = _props.prefixCls,\n          className = _props.className,\n          text = _props.text;\n\n      var style = _extends({\n        position: 'relative',\n        right: this.state.animatedWidth,\n        whiteSpace: 'nowrap',\n        display: 'inline-block'\n      }, this.props.style);\n\n      return React.createElement('div', {\n        className: prefixCls + '-marquee-wrap ' + className,\n        style: {\n          overflow: 'hidden'\n        },\n        role: 'marquee'\n      }, React.createElement('div', {\n        ref: function ref(el) {\n          return _this2.textRef = el;\n        },\n        className: prefixCls + '-marquee',\n        style: style\n      }, text));\n    }\n  }, {\n    key: '_startAnimation',\n    value: function _startAnimation() {\n      var _this3 = this;\n\n      if (this._marqueeTimer) {\n        window.clearTimeout(this._marqueeTimer);\n      }\n\n      var fps = this.props.fps;\n      var TIMEOUT = 1 / fps * 1000;\n      var isLeading = this.state.animatedWidth === 0;\n      var timeout = isLeading ? this.props.leading : TIMEOUT;\n\n      var animate = function animate() {\n        var overflowWidth = _this3.state.overflowWidth;\n        var animatedWidth = _this3.state.animatedWidth + 1;\n        var isRoundOver = animatedWidth > overflowWidth;\n\n        if (isRoundOver) {\n          if (_this3.props.loop) {\n            animatedWidth = 0;\n          } else {\n            return;\n          }\n        }\n\n        if (isRoundOver && _this3.props.trailing) {\n          _this3._marqueeTimer = window.setTimeout(function () {\n            _this3.setState({\n              animatedWidth: animatedWidth\n            });\n\n            _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n          }, _this3.props.trailing);\n        } else {\n          _this3.setState({\n            animatedWidth: animatedWidth\n          });\n\n          _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n        }\n      };\n\n      if (this.state.overflowWidth !== 0) {\n        this._marqueeTimer = window.setTimeout(animate, timeout);\n      }\n    }\n  }, {\n    key: '_measureText',\n    value: function _measureText() {\n      var container = ReactDOM.findDOMNode(this);\n      var node = this.textRef;\n\n      if (container && node) {\n        var containerWidth = container.offsetWidth;\n        var textWidth = node.offsetWidth;\n        var overflowWidth = textWidth - containerWidth;\n\n        if (overflowWidth !== this.state.overflowWidth) {\n          this.setState({\n            overflowWidth: overflowWidth\n          });\n        }\n      }\n    }\n  }]);\n\n  return Marquee;\n}(React.Component);\n\nexport default Marquee;\nMarquee.defaultProps = {\n  text: '',\n  loop: false,\n  leading: 500,\n  trailing: 800,\n  fps: 40,\n  className: ''\n};","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/node_modules/antd-mobile/es/notice-bar/Marquee.js"],"names":["_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","React","ReactDOM","Marquee","_React$Component","_this","__proto__","Object","getPrototypeOf","apply","arguments","state","animatedWidth","overflowWidth","key","value","componentDidMount","_measureText","_startAnimation","componentDidUpdate","_marqueeTimer","componentWillUnmount","clearTimeout","render","_this2","_props","props","prefixCls","className","text","style","position","right","whiteSpace","display","createElement","overflow","role","ref","el","textRef","_this3","window","fps","TIMEOUT","isLeading","timeout","leading","animate","isRoundOver","loop","trailing","setTimeout","setState","container","findDOMNode","node","containerWidth","offsetWidth","textWidth","Component","defaultProps"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n/*\n * https://github.com/jasonslyvia/react-marquee\n * remove PC\n * support React Element for text prop\n*/\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nvar Marquee = function (_React$Component) {\n    _inherits(Marquee, _React$Component);\n\n    function Marquee() {\n        _classCallCheck(this, Marquee);\n\n        var _this = _possibleConstructorReturn(this, (Marquee.__proto__ || Object.getPrototypeOf(Marquee)).apply(this, arguments));\n\n        _this.state = {\n            animatedWidth: 0,\n            overflowWidth: 0\n        };\n        return _this;\n    }\n\n    _createClass(Marquee, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this._measureText();\n            this._startAnimation();\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            this._measureText();\n            if (!this._marqueeTimer) {\n                this._startAnimation();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            clearTimeout(this._marqueeTimer);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var _props = this.props,\n                prefixCls = _props.prefixCls,\n                className = _props.className,\n                text = _props.text;\n\n            var style = _extends({ position: 'relative', right: this.state.animatedWidth, whiteSpace: 'nowrap', display: 'inline-block' }, this.props.style);\n            return React.createElement(\n                'div',\n                { className: prefixCls + '-marquee-wrap ' + className, style: { overflow: 'hidden' }, role: 'marquee' },\n                React.createElement(\n                    'div',\n                    { ref: function ref(el) {\n                            return _this2.textRef = el;\n                        }, className: prefixCls + '-marquee', style: style },\n                    text\n                )\n            );\n        }\n    }, {\n        key: '_startAnimation',\n        value: function _startAnimation() {\n            var _this3 = this;\n\n            if (this._marqueeTimer) {\n                window.clearTimeout(this._marqueeTimer);\n            }\n            var fps = this.props.fps;\n            var TIMEOUT = 1 / fps * 1000;\n            var isLeading = this.state.animatedWidth === 0;\n            var timeout = isLeading ? this.props.leading : TIMEOUT;\n            var animate = function animate() {\n                var overflowWidth = _this3.state.overflowWidth;\n\n                var animatedWidth = _this3.state.animatedWidth + 1;\n                var isRoundOver = animatedWidth > overflowWidth;\n                if (isRoundOver) {\n                    if (_this3.props.loop) {\n                        animatedWidth = 0;\n                    } else {\n                        return;\n                    }\n                }\n                if (isRoundOver && _this3.props.trailing) {\n                    _this3._marqueeTimer = window.setTimeout(function () {\n                        _this3.setState({\n                            animatedWidth: animatedWidth\n                        });\n                        _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n                    }, _this3.props.trailing);\n                } else {\n                    _this3.setState({\n                        animatedWidth: animatedWidth\n                    });\n                    _this3._marqueeTimer = window.setTimeout(animate, TIMEOUT);\n                }\n            };\n            if (this.state.overflowWidth !== 0) {\n                this._marqueeTimer = window.setTimeout(animate, timeout);\n            }\n        }\n    }, {\n        key: '_measureText',\n        value: function _measureText() {\n            var container = ReactDOM.findDOMNode(this);\n            var node = this.textRef;\n            if (container && node) {\n                var containerWidth = container.offsetWidth;\n                var textWidth = node.offsetWidth;\n                var overflowWidth = textWidth - containerWidth;\n                if (overflowWidth !== this.state.overflowWidth) {\n                    this.setState({\n                        overflowWidth: overflowWidth\n                    });\n                }\n            }\n        }\n    }]);\n\n    return Marquee;\n}(React.Component);\n\nexport default Marquee;\n\nMarquee.defaultProps = {\n    text: '',\n    loop: false,\n    leading: 500,\n    trailing: 800,\n    fps: 40,\n    className: ''\n};"]},"metadata":{},"sourceType":"module"}