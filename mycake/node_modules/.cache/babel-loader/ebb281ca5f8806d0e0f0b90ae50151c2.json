{"ast":null,"code":"import _regeneratorRuntime from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _toConsumableArray from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"F:\\\\1111111111\\\\demo2\\\\\\u7EBF\\u4E0B\\u4E09\\u9636\\u6BB5\\\\\\u4E09\\u9636\\u6BB5\\u5C0F\\u7EC4\\u9879\\u76EE\\\\react\\\\21cake\\\\mycake\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Carousel,WingBlank,NavBar,Drawer,List,Toast}from'antd-mobile';import{withRouter}from'react-router-dom';import'./goods.css';import http from'../../utils/http';//成功提示框\nfunction successToast(){Toast.success('成功添加到购物车！',1);}var Goods=/*#__PURE__*/function(_Component){_inherits(Goods,_Component);var _super=_createSuper(Goods);function Goods(){var _this;_classCallCheck(this,Goods);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={datalbt:null,open:false,//抽屉\nhavechange:false,//是否选了规格，选的话就加入到购物车\nweight:1//默认是款式1\n};_this.openchange=function(){var goodsdrawer=document.getElementsByClassName(\"goods-drawer\")[0];//要先判断有没有选了规格，选了的话havechange就是true，那么就加入购物车，没有的话得选规格然后havechange变为true\nif(_this.state.havechange){if(!_this.state.open){goodsdrawer.style=\"display:block\";}else{//把商品加入购物车,弹出加入成功\n// console.log(this.state.datamsg[0].gid);\n_this.add(_this.state.datamsg[0].gid);goodsdrawer.style=\"display:none\";}}else{//没选规格，open是false打开选择框\nif(!_this.state.open){goodsdrawer.style=\"display:block\";}else{goodsdrawer.style=\"display:none\";}}_this.setState({open:!_this.state.open,havechange:!_this.state.havechange});};_this.close=function(){var goodsdrawer=document.getElementsByClassName(\"goods-drawer\")[0];goodsdrawer.style=\"display:none\";_this.setState({open:false,havechange:false});};_this.changeweight=function(idx){//设置规格\n_this.setState({weight:idx});// console.log(this.state);\n// console.log(this.state.weight);这state设置是等我们点击事件结束才设置，所以此处log出来的还是原来的\n// console.log(idx);\nswitch(idx){//idx是一的话就高亮设置到1同事this.state.weight为1\ncase 1:_this.checkweight(1);break;case 2:_this.checkweight(2);break;case 3:_this.checkweight(3);break;case 4:_this.checkweight(4);break;default:_this.checkweight(1);}};_this.checkweight=function(idx){//改变高亮\nvar cakelis=document.getElementsByClassName('cakeweight');for(var i=0;i<cakelis.length;i++){//移除所有高亮\ncakelis[i].classList.remove('active');}//给目标设置高亮\ncakelis[idx-1].classList.add('active');//改变弹出框规格各个值\nvar str=\"\\n            <li className='details-options-size'>\\n                <i style=\\\"background: url(https://static.21cake.com/themes/wap/img/size.png) no-repeat center;background-size:auto 100%\\\"></i>\\n                \".concat(12.5*idx,\"x\").concat(12.5*idx,\"cm\\n            </li>\\n            <li className='details-options-unmber'>\\n                <i style=\\\"background: url(https://static.21cake.com/themes/wap/img/unmber.png) no-repeat center;background-size:auto 100%\\\"></i>\\n                \").concat(3*idx,\"-\").concat(5*idx,\"\\u4EBA\\n            </li>\\n            <li className='details-options-laid'>\\n                <i style=\\\"background: url(https://static.21cake.com/themes/wap/img/laid.png) no-repeat center;background-size:auto 100%\\\"></i>\\n                \\u542B\").concat(5*idx,\"\\u5957\\u9910\\u5177\\uFF08\\u8721\\u70DB\\u9700\\u5355\\u72EC\\u8BA2\\u8D2D\\uFF09\\n            </li>\");var cakeul=document.getElementsByClassName('details-options')[1];cakeul.innerHTML=str;//改变弹出框价格\nvar cakeprice=document.getElementsByClassName('details-price')[0];cakeprice.innerHTML=\"\\xA5\".concat(_this.state.datamsg[0].price*idx,\".00\");//改变datamsg[0]的weight值\n// this.setState({\n//     datamsg:{}\n// });\nswitch(idx){case 1:_this.state.datamsg[0].weight1=1;_this.state.datamsg[0].weight2=0;_this.state.datamsg[0].weight3=0;_this.state.datamsg[0].weight4=0;break;case 2:_this.state.datamsg[0].weight2=1;_this.state.datamsg[0].weight1=0;_this.state.datamsg[0].weight3=0;_this.state.datamsg[0].weight4=0;break;case 3:_this.state.datamsg[0].weight3=1;_this.state.datamsg[0].weight1=0;_this.state.datamsg[0].weight2=0;_this.state.datamsg[0].weight4=0;break;case 4:_this.state.datamsg[0].weight4=1;_this.state.datamsg[0].weight1=0;_this.state.datamsg[0].weight2=0;_this.state.datamsg[0].weight3=0;break;}// console.log(this.state.datamsg[0]);\n_this.setState({datamsg:_this.state.datamsg});};_this.showlbt=function(){if(_this.state.datalbt.length){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(WingBlank,null,/*#__PURE__*/React.createElement(Carousel,{autoplay:false,infinite:true},_this.state.datalbt.map(function(val,index){return/*#__PURE__*/React.createElement(\"a\",{key:val,href:\"\",style:{display:'inline-block',width:'100%',height:_this.state.imgHeight}},/*#__PURE__*/React.createElement(\"img\",{src:_this.state.datalbt[index],alt:\"\",style:{width:'100%',verticalAlign:'top'},onLoad:function onLoad(){window.dispatchEvent(new Event('resize'));_this.setState({imgHeight:'auto'});}}));}))));}};_this.showdatamsg=function(){// console.log(\"进来showdatamsg\"+this.state.weight);\nif(_this.state.datamsg.length){// console.log(this.state.datamsg[0]);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"details-box\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pro-title\"},/*#__PURE__*/React.createElement(\"h3\",null,_this.state.datamsg[0].egtitle),/*#__PURE__*/React.createElement(\"span\",null,_this.state.datamsg[0].chtitle)),/*#__PURE__*/React.createElement(\"p\",{className:\"price-label\"},/*#__PURE__*/React.createElement(\"span\",{className:\"top-price\"},\"￥\"+_this.state.datamsg[0].price*_this.state.weight+\".00\")),/*#__PURE__*/React.createElement(\"div\",{className:\"pro-details-label\"},/*#__PURE__*/React.createElement(\"a\",null,\"\\u65B0\\u54C1 \\u203A\")),/*#__PURE__*/React.createElement(\"ul\",{className:\"details-taste\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"img\",{src:\"https://static.21cake.com/themes/wap/img/goods/icon/micon-03.png\",alt:\"\\u9152\"}),\"\\u9152\"),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"img\",{src:\"https://static.21cake.com/themes/wap/img/goods/icon/micon-33.png\",alt:\"\\u5976\\u6CB9\"}),\"\\u5976\\u6CB9\"),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"img\",{src:\"https://static.21cake.com/upload/images/20200424/9a1558a50ef89716e49c6570bd667d0f.png\",alt:\"\\u6811\\u8393\"}),\"\\u6811\\u8393\")),/*#__PURE__*/React.createElement(\"div\",{className:\"select-card\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"select-specifications\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",{className:\"J-specifications\",style:{color:'#442818'}},\"\\u5DF2\\u9009\\u62E9\\uFF1A\".concat(454*_this.state.weight,\"g(\").concat(1*_this.state.weight,\".0\\u78C5)\"),/*#__PURE__*/React.createElement(\"i\",{onClick:_this.openchange})))),/*#__PURE__*/React.createElement(\"div\",{className:\"details-options-card\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"details-options\"},/*#__PURE__*/React.createElement(\"li\",{className:\"details-options-size\"},/*#__PURE__*/React.createElement(\"i\",null),\"\".concat(12.5*_this.state.weight,\"x\").concat(12.5*_this.state.weight,\"cm\")),/*#__PURE__*/React.createElement(\"li\",{className:\"details-options-unmber\"},/*#__PURE__*/React.createElement(\"i\",null),\"\".concat(3*_this.state.weight,\"-\").concat(5*_this.state.weight,\"\\u4EBA\")),/*#__PURE__*/React.createElement(\"li\",{className:\"details-options-laid\"},/*#__PURE__*/React.createElement(\"i\",null),\"\\u542B\".concat(5*_this.state.weight,\"\\u5957\\u9910\\u5177\\uFF08\\u8721\\u70DB\\u9700\\u5355\\u72EC\\u8BA2\\u8D2D\\uFF09\")),/*#__PURE__*/React.createElement(\"li\",{className:\"details-options-time\"}))),/*#__PURE__*/React.createElement(\"ul\",{className:\"store-info\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"img\",{src:\"https://static.21cake.com/themes/wap/img/fresh.png\",alt:\"\\u4FDD\\u9C9C\\u6761\\u4EF6\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u4FDD\\u9C9C\\u6761\\u4EF6\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,\"0\\uFF0D4\\u2103\\u4FDD\\u85CF10\\u5C0F\\u65F6\\uFF0C5\\u2103\\u98DF\\u7528\\u4E3A\\u4F73\"))),/*#__PURE__*/React.createElement(\"li\",{\"data-sweet\":\"3\",id:\"sweetList\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://m.21cake.com/themes/wap/img/sweet.png\"}),/*#__PURE__*/React.createElement(\"span\",null,\"\\u53C2\\u8003\\u751C\\u5EA6\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"sweet-list\"},/*#__PURE__*/React.createElement(\"i\",{className:\"active\"}),/*#__PURE__*/React.createElement(\"i\",{className:\"active\"}),/*#__PURE__*/React.createElement(\"i\",{className:\"active\"}),/*#__PURE__*/React.createElement(\"i\",null),/*#__PURE__*/React.createElement(\"i\",null)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"details-introduction\"},/*#__PURE__*/React.createElement(\"div\",{style:{padding:'15px',background:'#fff',marginTop:'12px'}},_this.state.datamsg[0].msg,/*#__PURE__*/React.createElement(\"br\",null),_this.state.datamsg[0].msg1),/*#__PURE__*/React.createElement(\"div\",{className:\"details-img\"},/*#__PURE__*/React.createElement(\"img\",{src:_this.state.datamsg[0].simg0}),/*#__PURE__*/React.createElement(\"img\",{src:_this.state.datamsg[0].simg1}),/*#__PURE__*/React.createElement(\"img\",{src:_this.state.datamsg[0].simg2}),/*#__PURE__*/React.createElement(\"img\",{src:_this.state.datamsg[0].simg3}),/*#__PURE__*/React.createElement(\"p\",{style:{textAlign:'center',color:'rgb(153,153,153)',fontSize:'x-small'}},\"\\u4EE5\\u4E0A\\u56FE\\u7247\\u4EC5\\u4F9B\\u53C2\\u8003\\uFF0C\\u8BF7\\u4EE5\\u6536\\u5230\\u5B9E\\u7269\\u4E3A\\u51C6\\u3002\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"font\",null,\"\\u9000\\u6539\\u8BF4\\u660E\\uFF1A\")),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"font\",null,\"1. \\u5317\\u4EAC\\u3001\\u4E0A\\u6D77\\u3001\\u676D\\u5DDE\\u3001\\u5E7F\\u5DDE\\u5730\\u533A\\u8DDD\\u914D\\u9001\\u65F6\\u95F46\\u5C0F\\u65F6\\u53CA\\u4EE5\\u4E0A\\u7684\\u8BA2\\u5355\\u53EF\\u4FEE\\u6539\\u3001\\u53D6\\u6D88\\u3001\\u9000\\u8BA2\\uFF1B\\u8DDD\\u914D\\u9001\\u65F6\\u95F4\\u4E0D\\u8DB35\\u5C0F\\u65F6\\uFF0C\\u8BA2\\u5355\\u4E0D\\u518D\\u652F\\u6301\\u4FEE\\u6539\\u3001\\u53D6\\u6D88\\u3001\\u9000\\u8BA2\\u3002\\uFF0822\\u70B9\\u4E4B\\u540E\\u4E0D\\u63A5\\u53D7\\u6B21\\u65E514\\u70B9\\u4E4B\\u524D\\u914D\\u9001\\u8BA2\\u5355\\u4FEE\\u6539\\u3001\\u9000\\u8BA2\\uFF09\")),/*#__PURE__*/React.createElement(\"p\",{style:{lineHeight:'20px'}},/*#__PURE__*/React.createElement(\"font\",null,\"2. \\u82CF\\u5DDE\\u3001\\u65E0\\u9521\\u3001\\u6DF1\\u5733\\u3001\\u5929\\u6D25\\u8DDD\\u914D\\u9001\\u65F6\\u95F4\\u4E0D\\u8DB38\\u5C0F\\u65F6\\uFF0C\\u8BA2\\u5355\\u4E0D\\u518D\\u652F\\u6301\\u4FEE\\u6539\\u3001\\u53D6\\u6D88\\u3001\\u9000\\u8BA2\\u3002\\uFF0822\\u70B9\\u4E4B\\u540E\\u4E0D\\u63A5\\u53D7\\u6B21\\u65E516\\u70B9\\u4E4B\\u524D\\u914D\\u9001\\u8BA2\\u5355\\u4FEE\\u6539\\u3001\\u9000\\u8BA2\\uFF09\")))));}};_this.add=function(gid){// console.log(this.state.datamsg[0]);\n//根据商品id先查询这个商品信息，然后加到购物车\nhttp.post('/shopcar/addgoods',{gid:_this.state.datamsg[0].gid,img:_this.state.datamsg[0].img,cname:_this.state.datamsg[0].chtitle,ename:_this.state.datamsg[0].egtitle,weight:_this.state.weight,weight1:_this.state.datamsg[0].weight1,weight2:_this.state.datamsg[0].weight2,weight3:_this.state.datamsg[0].weight3,weight4:_this.state.datamsg[0].weight4,price:_this.state.datamsg[0].price}).then(function(res){console.log(res.data.p);//成功后弹出提醒\nif(res.flag){successToast();}});};return _this;}_createClass(Goods,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var gid,_yield$http$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://识别是那个商品，然后请求数据\ngid=this.props.location.pathname.split(\"\".concat(this.props.match.path,\"/\"))[1];// console.log(gid);\n_context.next=3;return http.get('/good/getgood/'+gid);case 3:_yield$http$get=_context.sent;data=_yield$http$get.data;// console.log(data);\nthis.setState({datamsg:_toConsumableArray(data.p),datalbt:[data.p[0].img0,data.p[0].img1,data.p[0].img2,data.p[0].img3]});this.changeweight(1);case 7:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var aa=this.state.aa;var _this$state=this.state,datalbt=_this$state.datalbt,datamsg=_this$state.datamsg;var sidebar=/*#__PURE__*/React.createElement(List,null,/*#__PURE__*/React.createElement(\"div\",{className:\"details-suspension-pop\"},/*#__PURE__*/React.createElement(\"i\",{className:\"hide-button\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"details-suspension\"},/*#__PURE__*/React.createElement(\"i\",{onClick:this.close}),/*#__PURE__*/React.createElement(\"div\",{className:\"details-suspension-content\"},/*#__PURE__*/React.createElement(\"p\",{className:\"details-price\"},\"\\xA5198.00\"),/*#__PURE__*/React.createElement(\"div\",{className:\"suspension-spec-box\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"details-options\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"normal-box\"},/*#__PURE__*/React.createElement(\"p\",{className:\"detail-spec-title\"},\"\\u5546\\u54C1\\u89C4\\u683C\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"details-suspension-size\"},/*#__PURE__*/React.createElement(\"li\",{className:\"cakeweight weight1 active\",\"data-productid\":\"22042\",onClick:this.changeweight.bind(null,1)},/*#__PURE__*/React.createElement(\"span\",null,\"454g\"),\"(1.0\\u78C5)\"),/*#__PURE__*/React.createElement(\"li\",{\"data-productid\":\"22050\",className:\"cakeweight weight2 \",id:\"weight2\",onClick:this.changeweight.bind(null,2)},/*#__PURE__*/React.createElement(\"span\",null,\"908g\"),\"(2.0\\u78C5)\"),/*#__PURE__*/React.createElement(\"li\",{\"data-productid\":\"22058\",className:\"cakeweight weight3 \",id:\"weight3\",onClick:this.changeweight.bind(null,3)},/*#__PURE__*/React.createElement(\"span\",null,\"1362g\"),\"(3.0\\u78C5)\"),/*#__PURE__*/React.createElement(\"li\",{\"data-productid\":\"22066\",className:\"cakeweight weight4 \",id:\"weight4\",onClick:this.changeweight.bind(null,4)},/*#__PURE__*/React.createElement(\"span\",null,\"1816g\"),\"(4.0\\u78C5)\")))))));return/*#__PURE__*/React.createElement(\"div\",{className:\"goods\"},datalbt?this.showlbt():null,datamsg?this.showdatamsg():null,/*#__PURE__*/React.createElement(\"div\",{className:\"footer\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",{id:\"appDownloadLink\"},/*#__PURE__*/React.createElement(\"a\",{href:\"https://m.21cake.com/appdown.html\"},\"\\u4E0B\\u8F7DAPP\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",null,\"\\u8054\\u7CFB\\u6211\\u4EEC\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",null,\"\\u5168\\u7AD9\\u516C\\u544A\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"a\",null,\"\\u751F\\u4EA7\\u7ECF\\u8425\\u8D44\\u8D28\"))),/*#__PURE__*/React.createElement(\"p\",{style:{marginBottom:'30px'}},\"Copyright\\xA9 21Cake\\u86CB\\u7CD5\\u5B98\\u7F51\\u5546\\u57CE 2007-2020,\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u7248\\u6743\\u6240\\u6709\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u4EACICP\\u590714006254\\u53F7-1\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u7F51\\u7AD9\\u6CE8\\u518C\\u516C\\u53F8\\u540D\\u79F0: \\u5317\\u4EAC\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u7F51\\u7AD9\\u8FD0\\u8425\\uFF1A\\u5EFF\\u4E00\\u5BA2\\uFF08\\u4E0A\\u6D77\\uFF09\\u7535\\u5B50\\u5546\\u52A1\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u4E0A\\u6D77\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\\u5206\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u676D\\u5DDE\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u5E7F\\u5DDE\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u5317\\u4EAC\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u6DF1\\u5733\\u5EFF\\u4E00\\u5BA2\\u8D38\\u6613\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u5929\\u6D25\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u5E7F\\u5DDE\\u5EFF\\u4E00\\u5BA2\\u98DF\\u54C1\\u8D38\\u6613\\u6709\\u9650\\u516C\\u53F8\",/*#__PURE__*/React.createElement(\"br\",null),\"\\u4E3E\\u5B9E\\uFF08\\u4E0A\\u6D77\\uFF09\\u98DF\\u54C1\\u6709\\u9650\\u516C\\u53F8\")),/*#__PURE__*/React.createElement(NavBar,{mode:\"light\",className:\"bottom-addcart-button\",leftContent:[/*#__PURE__*/React.createElement(\"a\",{key:\"0\",className:\"left-buy\",\"data-goods-id\":\"1318\",onClick:datamsg?this.add.bind(null,this.state.datamsg[0].gid):null},\"\\u7ACB\\u5373\\u8D2D\\u4E70\")],rightContent:[/*#__PURE__*/React.createElement(\"a\",{key:\"0\",className:\"join-cart\",\"data-goods-id\":\"1318\",onClick:this.openchange},\"\\u52A0\\u5165\\u8D2D\\u7269\\u8F66\")]}),/*#__PURE__*/React.createElement(Drawer,{className:\"goods-drawer\",contentStyle:{height:0,textAlign:\"center\"},overlayStyle:{height:0},sidebar:sidebar,open:this.state.open,position:\"bottom\"},\"11112222222222\"),/*#__PURE__*/React.createElement(\"a\",{id:\"webIm\"}));}}]);return Goods;}(Component);Goods=withRouter(Goods);export default Goods;","map":{"version":3,"sources":["F:/1111111111/demo2/线下三阶段/三阶段小组项目/react/21cake/mycake/src/pages/Goods/index.js"],"names":["React","Component","Carousel","WingBlank","NavBar","Drawer","List","Toast","withRouter","http","successToast","success","Goods","state","datalbt","open","havechange","weight","openchange","goodsdrawer","document","getElementsByClassName","style","add","datamsg","gid","setState","close","changeweight","idx","checkweight","cakelis","i","length","classList","remove","str","cakeul","innerHTML","cakeprice","price","weight1","weight2","weight3","weight4","showlbt","map","val","index","display","width","height","imgHeight","verticalAlign","window","dispatchEvent","Event","showdatamsg","egtitle","chtitle","color","padding","background","marginTop","msg","msg1","simg0","simg1","simg2","simg3","textAlign","fontSize","lineHeight","post","img","cname","ename","then","res","console","log","data","p","flag","props","location","pathname","split","match","path","get","img0","img1","img2","img3","aa","sidebar","bind","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Carousel,WingBlank, NavBar,Drawer, List,Toast} from 'antd-mobile';\r\nimport {withRouter} from 'react-router-dom';\r\nimport './goods.css'\r\nimport http from '../../utils/http'\r\n\r\n//成功提示框\r\nfunction successToast() {\r\n    Toast.success('成功添加到购物车！', 1);\r\n  }\r\n\r\nclass Goods extends Component {\r\n    state={\r\n        datalbt:null,\r\n        open: false,//抽屉\r\n        havechange:false,//是否选了规格，选的话就加入到购物车\r\n        weight:1,//默认是款式1\r\n    }\r\n    //打开商品选择框\r\n    openchange=(...args)=>{\r\n        let goodsdrawer=document.getElementsByClassName(\"goods-drawer\")[0]\r\n        //要先判断有没有选了规格，选了的话havechange就是true，那么就加入购物车，没有的话得选规格然后havechange变为true\r\n        if(this.state.havechange){\r\n            if(!this.state.open){\r\n                goodsdrawer.style=\"display:block\"\r\n            }else{\r\n                //把商品加入购物车,弹出加入成功\r\n                // console.log(this.state.datamsg[0].gid);\r\n                this.add(this.state.datamsg[0].gid)\r\n                goodsdrawer.style=\"display:none\"\r\n            }\r\n            \r\n        }else{\r\n            //没选规格，open是false打开选择框\r\n            if(!this.state.open){\r\n                goodsdrawer.style=\"display:block\"\r\n            }else{\r\n                goodsdrawer.style=\"display:none\"\r\n            }\r\n        }\r\n        \r\n        this.setState({open:!this.state.open,havechange:!this.state.havechange})\r\n        \r\n    }\r\n    close=()=>{\r\n        let goodsdrawer=document.getElementsByClassName(\"goods-drawer\")[0];\r\n        goodsdrawer.style=\"display:none\"\r\n        this.setState({open:false,havechange:false})\r\n    }\r\n    async componentDidMount(){\r\n        //识别是那个商品，然后请求数据\r\n        let gid= this.props.location.pathname.split(`${this.props.match.path}/`)[1];\r\n        // console.log(gid);\r\n        const {data}=await http.get('/good/getgood/'+gid);\r\n        // console.log(data);\r\n        this.setState({\r\n            datamsg:[...data.p],\r\n            datalbt:[data.p[0].img0,data.p[0].img1,data.p[0].img2,data.p[0].img3]\r\n          });\r\n          this.changeweight(1)\r\n    }\r\n    changeweight=(idx)=>{\r\n        //设置规格\r\n        this.setState({weight:idx});\r\n        // console.log(this.state);\r\n        // console.log(this.state.weight);这state设置是等我们点击事件结束才设置，所以此处log出来的还是原来的\r\n        // console.log(idx);\r\n        switch(idx){\r\n            //idx是一的话就高亮设置到1同事this.state.weight为1\r\n            case 1: this.checkweight(1)\r\n                break;\r\n            case 2:  this.checkweight(2)\r\n                break;\r\n            case 3:  this.checkweight(3)\r\n                break;\r\n            case 4:  this.checkweight(4)\r\n                break;\r\n            default:this.checkweight(1)\r\n\r\n        }\r\n    }\r\n    checkweight=(idx)=>{\r\n        //改变高亮\r\n        let cakelis=document.getElementsByClassName('cakeweight');\r\n        for(var i=0;i<cakelis.length;i++){\r\n            //移除所有高亮\r\n            cakelis[i].classList.remove('active')\r\n        }\r\n        //给目标设置高亮\r\n        cakelis[idx-1].classList.add('active');\r\n        //改变弹出框规格各个值\r\n        var str=`\r\n            <li className='details-options-size'>\r\n                <i style=\"background: url(https://static.21cake.com/themes/wap/img/size.png) no-repeat center;background-size:auto 100%\"></i>\r\n                ${12.5*idx}x${12.5*idx}cm\r\n            </li>\r\n            <li className='details-options-unmber'>\r\n                <i style=\"background: url(https://static.21cake.com/themes/wap/img/unmber.png) no-repeat center;background-size:auto 100%\"></i>\r\n                ${3*idx}-${5*idx}人\r\n            </li>\r\n            <li className='details-options-laid'>\r\n                <i style=\"background: url(https://static.21cake.com/themes/wap/img/laid.png) no-repeat center;background-size:auto 100%\"></i>\r\n                含${5*idx}套餐具（蜡烛需单独订购）\r\n            </li>`;\r\n        let cakeul= document.getElementsByClassName('details-options')[1];\r\n        cakeul.innerHTML=str;\r\n        //改变弹出框价格\r\n        let cakeprice = document.getElementsByClassName('details-price')[0]\r\n        cakeprice.innerHTML=`¥${this.state.datamsg[0].price*idx}.00`;\r\n        //改变datamsg[0]的weight值\r\n        // this.setState({\r\n        //     datamsg:{}\r\n        // });\r\n        switch(idx){\r\n            case 1: this.state.datamsg[0].weight1=1 ;this.state.datamsg[0].weight2=0 ;this.state.datamsg[0].weight3=0;this.state.datamsg[0].weight4=0\r\n                break;\r\n            case 2: this.state.datamsg[0].weight2=1 ;this.state.datamsg[0].weight1=0;this.state.datamsg[0].weight3=0;this.state.datamsg[0].weight4=0\r\n                break;\r\n            case 3: this.state.datamsg[0].weight3=1 ;this.state.datamsg[0].weight1=0;this.state.datamsg[0].weight2=0;this.state.datamsg[0].weight4=0\r\n                break;\r\n            case 4: this.state.datamsg[0].weight4=1 ;this.state.datamsg[0].weight1=0;this.state.datamsg[0].weight2=0;this.state.datamsg[0].weight3=0\r\n                break;\r\n        }\r\n        // console.log(this.state.datamsg[0]);\r\n        this.setState({datamsg:this.state.datamsg});\r\n    }\r\n    showlbt=()=>{\r\n        if(this.state.datalbt.length){\r\n            return (\r\n                <div>\r\n                    <WingBlank>\r\n                    <Carousel\r\n                            autoplay={false}\r\n                            infinite>\r\n                            {this.state.datalbt.map((val,index) => (\r\n                            <a\r\n                                key={val}\r\n                                href=\"\"\r\n                                style={{ display: 'inline-block', width: '100%', height: this.state.imgHeight }}>\r\n                                <img\r\n                                src={this.state.datalbt[index]}\r\n                                alt=\"\"\r\n                                style={{ width: '100%', verticalAlign: 'top' }}\r\n                                onLoad={() => {\r\n                                    window.dispatchEvent(new Event('resize'));\r\n                                    this.setState({ imgHeight: 'auto' });\r\n                                }}\r\n                                />\r\n                            </a>\r\n                            ))}\r\n                    </Carousel>\r\n                    </WingBlank>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    showdatamsg=()=>{\r\n        // console.log(\"进来showdatamsg\"+this.state.weight);\r\n        if(this.state.datamsg.length){\r\n            // console.log(this.state.datamsg[0]);\r\n            return (\r\n                <div className='details-box'>\r\n                    <div className='pro-title'>\r\n                        <h3>{this.state.datamsg[0].egtitle}</h3>\r\n                        <span>{this.state.datamsg[0].chtitle}</span>\r\n                    </div>\r\n                    <p className='price-label'>\r\n                        <span className='top-price'>{\"￥\"+this.state.datamsg[0].price*this.state.weight+\".00\"}</span>\r\n                    </p>\r\n                    <div className='pro-details-label'>\r\n                        <a>新品 ›</a>\r\n                    </div>\r\n                    <ul className='details-taste'>\r\n                        <li>\r\n                            <img src='https://static.21cake.com/themes/wap/img/goods/icon/micon-03.png' alt='酒'></img>\r\n                            酒\r\n                        </li>\r\n                        <li>\r\n                            <img src='https://static.21cake.com/themes/wap/img/goods/icon/micon-33.png' alt='奶油'></img>\r\n                            奶油\r\n                        </li>\r\n                        <li>\r\n                            <img src='https://static.21cake.com/upload/images/20200424/9a1558a50ef89716e49c6570bd667d0f.png' alt='树莓'></img>\r\n                            树莓\r\n                        </li>\r\n                    </ul>\r\n                    <div className='select-card'>\r\n                        <ul className='select-specifications'>\r\n                            <li>\r\n                                <a className='J-specifications' style={{color:'#442818'}}>\r\n                                {`已选择：${454*this.state.weight}g(${1*this.state.weight}.0磅)`}\r\n                                <i onClick={this.openchange}></i>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                        <div className='details-options-card'>\r\n                            <ul className='details-options'>\r\n                                <li className='details-options-size'>\r\n                                    <i></i>\r\n                                {`${12.5*this.state.weight}x${12.5*this.state.weight}cm`}\r\n                                </li>\r\n                                <li className='details-options-unmber'>\r\n                                    <i></i>\r\n                                    {`${3*this.state.weight}-${5*this.state.weight}人`}\r\n                                </li>\r\n                                <li className='details-options-laid'>\r\n                                    <i></i>\r\n                                    {`含${5*this.state.weight}套餐具（蜡烛需单独订购）`}\r\n                                </li>\r\n                                <li className='details-options-time'></li>\r\n                            </ul>\r\n                        </div>\r\n                        <ul className='store-info'>\r\n                            <li>\r\n                                <img src='https://static.21cake.com/themes/wap/img/fresh.png' alt=\"保鲜条件\"></img>\r\n                                <span>保鲜条件</span>\r\n                                <div>\r\n                                    <p>0－4℃保藏10小时，5℃食用为佳</p>\r\n                                </div>\r\n                            </li>\r\n                            <li data-sweet='3' id='sweetList'>\r\n                                <img src='https://m.21cake.com/themes/wap/img/sweet.png'></img>\r\n                                <span>参考甜度</span>\r\n                                <div>\r\n                                    <p className='sweet-list'>\r\n                                        <i className='active'></i>\r\n                                        <i className='active'></i>\r\n                                        <i className='active'></i>\r\n                                        <i ></i>\r\n                                        <i></i>\r\n                                    </p>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div className='details-introduction'>\r\n                    <div style={{padding:'15px',background:'#fff',marginTop:'12px'}}>\r\n                    {this.state.datamsg[0].msg}\r\n                    <br></br>\r\n                    {this.state.datamsg[0].msg1}\r\n                    </div>\r\n                    <div className='details-img'>\r\n                        <img src={this.state.datamsg[0].simg0}></img>\r\n                        <img src={this.state.datamsg[0].simg1}></img>\r\n                        <img src={this.state.datamsg[0].simg2}></img>\r\n                        <img src={this.state.datamsg[0].simg3}></img>\r\n                        <p style={{textAlign:'center',color:'rgb(153,153,153)',fontSize:'x-small'}}>以上图片仅供参考，请以收到实物为准。</p>\r\n                        <p ><font>退改说明：</font></p>\r\n                        <p ><font>1. 北京、上海、杭州、广州地区距配送时间6小时及以上的订单可修改、取消、退订；距配送时间不足5小时，订单不再支持修改、取消、退订。（22点之后不接受次日14点之前配送订单修改、退订）</font></p>\r\n                        <p style={{lineHeight:'20px'}}><font>2. 苏州、无锡、深圳、天津距配送时间不足8小时，订单不再支持修改、取消、退订。（22点之后不接受次日16点之前配送订单修改、退订）</font></p>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    //添加商品\r\n    add=(gid)=>{\r\n        // console.log(this.state.datamsg[0]);\r\n        //根据商品id先查询这个商品信息，然后加到购物车\r\n          http.post('/shopcar/addgoods',{\r\n              gid:this.state.datamsg[0].gid,\r\n              img:this.state.datamsg[0].img,\r\n              cname:this.state.datamsg[0].chtitle,\r\n              ename:this.state.datamsg[0].egtitle,\r\n              weight:this.state.weight,\r\n              weight1:this.state.datamsg[0].weight1,\r\n              weight2:this.state.datamsg[0].weight2,\r\n              weight3:this.state.datamsg[0].weight3,\r\n              weight4:this.state.datamsg[0].weight4,\r\n              price:this.state.datamsg[0].price}).then(res=>{\r\n            console.log(res.data.p);\r\n          //成功后弹出提醒\r\n          if(res.flag){\r\n            successToast()\r\n          }\r\n          })\r\n      }\r\n    render() {\r\n        let {aa}=this.state\r\n        const {datalbt,datamsg} = this.state;\r\n        const sidebar=(<List>{\r\n                <div className='details-suspension-pop'>\r\n                    <i className='hide-button'></i>\r\n                    <div className='details-suspension'>\r\n                        <i onClick={this.close}></i>\r\n                        <div className='details-suspension-content'>\r\n                            <p className='details-price'>¥198.00</p>\r\n                            <div className='suspension-spec-box'>\r\n                                <ul className='details-options'>\r\n                                </ul>\r\n                            </div>\r\n                            <div className='normal-box'>\r\n                                <p className='detail-spec-title'>商品规格</p>\r\n                                <ul className='details-suspension-size'>\r\n                                    <li className='cakeweight weight1 active' data-productid='22042' onClick={this.changeweight.bind(null,1)}>\r\n                                        <span>454g</span>\r\n                                        (1.0磅)\r\n                                    </li>\r\n                                    <li data-productid='22050' className='cakeweight weight2 ' id='weight2' onClick={this.changeweight.bind(null,2)} >\r\n                                        <span>908g</span>\r\n                                        (2.0磅)\r\n                                    </li>\r\n                                    <li data-productid='22058' className='cakeweight weight3 ' id='weight3' onClick={this.changeweight.bind(null,3)}>\r\n                                        <span>1362g</span>\r\n                                        (3.0磅)\r\n                                    </li>\r\n                                    <li data-productid='22066' className='cakeweight weight4 ' id='weight4' onClick={this.changeweight.bind(null,4)}>\r\n                                        <span>1816g</span>\r\n                                        (4.0磅)\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </List>)\r\n        return (\r\n            <div className=\"goods\">\r\n                {/* 有数据才渲染没数据不渲染 */}\r\n                {datalbt ? this.showlbt(): null}\r\n                {datamsg ? this.showdatamsg(): null}\r\n                <div className='footer'>\r\n                    <ul>\r\n                    <li id='appDownloadLink'>\r\n                        <a href='https://m.21cake.com/appdown.html'>下载APP</a>\r\n                    </li>\r\n                    <li>\r\n                        <a >联系我们</a>\r\n                    </li>\r\n                    <li>\r\n                        <a >全站公告</a>\r\n                    </li>\r\n                    <li>\r\n                        <a >生产经营资质</a>\r\n                    </li>\r\n                    </ul>\r\n                    <p style={{marginBottom:'30px'}}>\r\n                    Copyright© 21Cake蛋糕官网商城 2007-2020, \r\n                    <br></br>        \r\n                    版权所有 \r\n                    <br></br>  \r\n                    京ICP备14006254号-1\r\n                    <br></br>  \r\n                    网站注册公司名称: 北京廿一客食品有限公司\r\n                    <br></br>  \r\n                    网站运营：廿一客（上海）电子商务有限公司\r\n                    <br></br>  \r\n                    上海廿一客食品有限公司分公司\r\n                    <br></br>  \r\n                    杭州廿一客食品有限公司\r\n                    <br></br>  \r\n                    广州廿一客食品有限公司\r\n                    <br></br>  \r\n                    北京廿一客食品有限公司\r\n                    <br></br>  \r\n                    深圳廿一客贸易有限公司\r\n                    <br></br>  \r\n                    天津廿一客食品有限公司\r\n                    <br></br>  \r\n                    广州廿一客食品贸易有限公司\r\n                    <br></br>  \r\n                    举实（上海）食品有限公司\r\n                    </p>\r\n                </div>\r\n                <NavBar\r\n                    mode=\"light\"\r\n                    className='bottom-addcart-button'\r\n                    leftContent={[\r\n                        <a key='0' className='left-buy' data-goods-id='1318' onClick={datamsg ? this.add.bind(null,this.state.datamsg[0].gid) : null}>立即购买</a>\r\n                    ]}\r\n                    rightContent={[\r\n                        <a key='0' className='join-cart' data-goods-id='1318' onClick={this.openchange}>加入购物车</a>\r\n                    ]}\r\n                >\r\n                </NavBar>\r\n                <Drawer\r\n                className=\"goods-drawer\"\r\n                contentStyle={{height:0,textAlign:\"center\"}}\r\n                overlayStyle={{height:0}}\r\n                sidebar={sidebar}\r\n                open={this.state.open}\r\n                position='bottom'\r\n                >\r\n                11112222222222\r\n                </Drawer>\r\n                <a id='webIm'></a>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nGoods = withRouter(Goods)\r\nexport default Goods"]},"metadata":{},"sourceType":"module"}